<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>14 其他-文件管理 - iterate self</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="iterateself" />
  <meta name="description" content="Linux甫困品界示側 Linux操作和Windows操作有很大的不同。要熟练地使用Linux系统，首先要了解Linux 系统的目录结构，并且掌" />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.47.1" />


<link rel="canonical" href="http://iterate.site/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/01-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/02-linux-%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/14-%E5%85%B6%E4%BB%96-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="14 其他-文件管理" />
<meta property="og:description" content="Linux甫困品界示側 Linux操作和Windows操作有很大的不同。要熟练地使用Linux系统，首先要了解Linux 系统的目录结构，并且掌" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://iterate.site/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/01-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/02-linux-%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/14-%E5%85%B6%E4%BB%96-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" /><meta property="article:published_time" content="2018-06-27T07:04:55&#43;00:00"/>
<meta property="article:modified_time" content="2018-06-27T07:04:55&#43;00:00"/>
<meta itemprop="name" content="14 其他-文件管理">
<meta itemprop="description" content="Linux甫困品界示側 Linux操作和Windows操作有很大的不同。要熟练地使用Linux系统，首先要了解Linux 系统的目录结构，并且掌">


<meta itemprop="datePublished" content="2018-06-27T07:04:55&#43;00:00" />
<meta itemprop="dateModified" content="2018-06-27T07:04:55&#43;00:00" />
<meta itemprop="wordCount" content="10099">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="14 其他-文件管理"/>
<meta name="twitter:description" content="Linux甫困品界示側 Linux操作和Windows操作有很大的不同。要熟练地使用Linux系统，首先要了解Linux 系统的目录结构，并且掌"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">iterate self</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">about</li>
      </a><a href="/catalog/">
        <li class="mobile-menu-item">目录</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">iterate self</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">about</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/catalog/">目录</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">14 其他-文件管理</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-06-27 </span>
        
        <span class="more-meta"> 10099 words </span>
        <span class="more-meta"> 21 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content">
    
  </div>
</div>

    
    

    
    <div class="post-content">
      <p>Linux甫困品界示側</p>

<p>Linux操作和Windows操作有很大的不同。要熟练地使用Linux系统，首先要了解Linux 系统的目录结构，并且掌握常用的命令，以便进行文件操作、信息查看和系统参数配置等操作。 本附录的目的是通过示例的方式演示Linux的一些常用命令，与运维相关的高级命令则在本书 的正文中详细介绍。</p>

<p>魏• 1 文件管理</p>

<p>文件是Linux的基本组成部分，文件管理包括文件的复制、删除、修改等操作。本节主要 介绍Linux中文件管理相关的命令。</p>

<p>A.1.1复制文件cp</p>

<p>cp命令用来复制文件或目录。当复制多个文件时，目标文件参数必须为已经存在的目录。 cp命令默认不能复制目录，复制目录必须使用-R选项。cp命令具备了 In命令的功能。语法为: cp ［选项］［参数］。</p>

<p>【示例A-1】</p>

<p>#以下为演示cp的用法</p>

<p>[root@CentOS ~J# cd /usr/Xocal/ngxxix/conf</p>

<p>nginx.conf</p>

<p>#如需显示执行过程，可以使用以下选项</p>

<p>#当使用cp命令复制单个文件时，第1个参数表示源文件，第2个参数表示目标文件</p>

<p>[root@CentOS conf]# cp -v nginx.conf ngxnx.conf.20150412</p>

<p>&lsquo;nginx.conf* -&gt; &lsquo;nginx.conf.201504121</p>

<p>[rootQCentOS conf]# Is -1 nginx.conf nginx.conf.20150412</p>

<p>-rw~r~~r-一. 1 root root 2685 Apr 11 03:15 nginx.conf</p>

<p>-rw-r-~r. 1 root root 2685 Apr 12 20:33 n&lt;3inx.conf.20150412 番复翻多个文件</p>

<p>[root@CentOS conf]# cp -v nginx.conf nginx.conf.20150412 backup/</p>

<p>&lsquo;nginx.conf1 -&gt; &lsquo;backup/nginx.conf *</p>

<p>&lsquo;nginx.conf.20150412&rsquo; -&gt; &lsquo;backup/nginx.conf.20150412 *</p>

<p>[root@CentOS conf]# 11 nginx.conf nginx.conf.20X50412 backup/</p>

<p>-rw~r&ndash;r~~.</p>

<p>1 goss goss 2685 Apr 12 20:47 nginx.conf 1 root root 2685 Apr 12 20:59 nginx.conf.20150412</p>

<p>backup/: total 8 -rw-r&ndash;r&ndash;.</p>

<p>1 root root 2685 Apr 12 21:01 nginx.conf 1 root root 2685 Apr 12 21:01 nginx.conf.20150412</p>

<p>-rw-r&ndash;r&ndash;.</p>

<p>#复制文件夹</p>

<p>[root@CentOS nginx]# cp conf conf.bak</p>

<p>cp: omitting directory &lsquo;conf&rsquo;</p>

<p>[root@CentOS nginx]# cp -r conf conf.20150412</p>

<p>[root@CentOS nginx]# Is -1</p>

<p>total 40</p>

<p>drwxr-xr~x. 2 root root 4096 Apr 12 20:33 conf</p>

<p>drwxr~xr~x. 2 root root 4096 Apr 12 20 :33 conf. 20150412</p>

<p>[root@CentOS goss]# su - goss</p>

<p>#复制时保留文件的原始属性</p>

<p>[goss@CentOS 〜cp -a /usr/local/nginx/ .</p>

<p>cp: cannot access &lsquo;/usr/local/nginx/uwsgi_temp1:Permission denied</p>

<p>cp</p>

<p>cp</p>

<p>cp</p>

<p>cp</p>

<p>cannot access cannot access cannot access cannot access</p>

<p>k/usr/local/nginx/fastcgi^temp1: Permission denied &lsquo;/usr/local/nginx/scgi^temp1: Permission denied &lsquo;/usr/local/nginx/client_bociy_temp,: Permission denied &lsquo;/usr/local/nginx/proxy_temp*: Permission denied</p>

<p>[goss^CentOS $ Is -1 drwxr-xr-x. 12 goss goss [gossQCentOS ~]$ 11 total 2784</p>

<p>4096 Apr 12 20:33 nginx</p>

<p>drwxr-xr-x. 12 goss goss</p>

<p>4096 Apr 12 20:33 nginx</p>

<p>[root@CentOS goss]# cp -a    nginx/    nginx.bak</p>

<p>[xoot@CentOS goss]# Is -1</p>

<p>total 2788</p>

<p>drwxr-xr-x. 12 goss goss    4096    Apr    12 20:33    nginx</p>

<p>drwxr-xr~x. 12 goss goss    4096    Apr    12 20:33    nginx.bak</p>

<p>[root@CentOS goss]# cp -r nginx nginx.root</p>

<p>[rocrt@CentOS goss]# Is -1</p>

<p>total 2792 drwxr-xr-x drwxr-xr~x drwxr-xr-x</p>

<p>4096 Apr 12 20:33 nginx 4096 Apr 12 20:33 nginx.bak 4096 Apr 12 20:35 nginx.root [root@CentOS conf]# cp -i /usr/local/nginx/conf/nginx.conf cp: overwrite &lsquo;./nginx.conf * ? n</p>

<p>[root@CentOS conf]# cp -f /usr/local/nginx/conf/nginx.conf [root@CentOS conf]#</p>

<p>#并不复制文件本身，而是创建当前文件的软链接</p>

<p>[root@CentOS conf]# cp -s nginx.conf nginx•conf一s</p>

<p>[root@C©ntOS conf]禅 Is -1</p>

<p>12 goss goss 12- goss goss 12 root root</p>

<p>lrwxrwxrwx. 1 root root 10 Apr 12 20:49 nginx.conf_s -&gt; nginx.conf</p>

<p>[root@CentOS conf]# md5sum nginx.conf /usx/local/nginx/conf/ng</p>

<p>nginx.conf    nginx.conf.bak    nginx.conf.default nginx.conf.mv</p>

<p>[root®CentOS conf]# md5sum nginx.conf /usr/local/nginx/conf/nginx.conf</p>

<p>1181cl834012245d785120e3505edl69 nginx.conf</p>

<p>30d53ba50698ba789d093eec830d0253 /usr/local/nginx/conf/nginx.conf</p>

<p>[root@C©ntOS conf]# cp -b /usr/local/nginx/conf/nginx.conf .</p>

<p>cp: overwrite &lsquo;./nginx.conf<em>? y [root@CentOS conf]# md5sum nginx.conf</em></p>

<p>30d53ba50698ba789d093eec830d0253 nginx.conf 1181cl834012245d785120e3505edl69 nginx.conf-</p>

<p>cp可以复制一个或多个文件，当复制多个文件时，最后一个参数必须为已经存在的目录， 否则会提示错误。如果忽略提示信息则可以使用“-f”选项。</p>

<p>为防止用户在不经意的情况下使用cp命令破坏另一个文件，如用户指定的目标文件名已 存在，用cp命令拷贝文件后，这个文件就会被覆盖，V选项可以在覆盖之前询问用户。</p>

<p>A.1.2移动文件mv</p>

<p>用户可以使用mv命令来移动文件或目录至另一文件或目录，还可以将目录或文件重命 名。mv只接收两个参数，第1个为要移动或重命名的文件或目录，第2个为新文件名或目录。 当mv接收两个参数或多个参数时，如果最后一个参数对应的是目录而且该目录存在，mv会 将各参数指定的文件或目录移动到此目录中，如果目的文件存在时，将会进行覆盖。</p>

<p>【示例A-2】</p>

<p>[root@CentOS conf]# cp -a nginx.conf.bak nginx.conf.20150412</p>

<p>[root@CentOS conf]# Is -1 total 72</p>

<p>-rw-r&ndash;r&ndash;. 1 root root 2685 Apr 12 22:52 nginx.conf.20150412 -rw-r一r&ndash;. 1 root root 2685 Apr 12 22:52 nginx.conf.bak #如果目标文件己经存在，将会询问用户是否覆盖</p>

<p>[root@CentOS conf]# /bin/mv -i nginx.conf.20150412 nginx.conf.bak</p>

<p>/bin/mv: overwrite &lsquo;nginx.conf.bak* ? y [rootQCentOS conf]# Is -I total 72    ，</p>

<p>-rw-r&ndash;r—. 1 root root 2685 Apr 12 22:52 nginx.conf.bak [rootQCentOS conf]# cp -a nginx.conf.bak nginx.conf.20150412</p>

<p>[root@CentOS conf]# Is -1 total 72</p>

<p>-rw-r&ndash;r&ndash;. 1 root root 2685 Apr 12 22:52 nginx.conf.20150412 -rw-r&ndash;r&ndash;. 1 root root 2685 Apr 12 22:52 nginx.conf.bak #在要覆盖某已有的目标文件时不给任何提示信息</p>

<p>[root@CentOS conf]# /bin/mv -f nginx.conf.20150412 nginx.conf.bak</p>

<p>[root@CentOS conf]# Is -1 total 68</p>

<p>-rw~r——r. 1 root root 2685 Apr 12 22:52 nginx.conf.bak</p>

<p>为避免误覆盖文件，建议使用mv命令移动文件时，最好使用“-i”选项。</p>

<p>A.1.3创建文件或修改文件时间touch</p>

<p>Linux中touch命令可以改变文档或目录时间，包括存取时间和更改时间，也可以用于创 建新文件=</p>

<p>【示例A-3】</p>

<p>#查看文件相关信息</p>

<p>[root@CentOS test]# stat test2</p>

<p>Access: 2015-04-12 23:45:48.545991370 +0800 Modify: 2015-04-12 23:45:16.214994359 +0800 Change: 2015-04-12 23:45:41.791990423 +0800 #如果没有指定Time变量值，touch命令就使用当前时间</p>

<p>[root@CentOS test]# touch test2</p>

<p>##再次查看文件日期参数，atime与mtime都改变了，但ctime则是记录当前的时间。 [root@CentOS test]# stat test2</p>

<p>Access: 2015-04-13 00:14:20.427990736 +0800 Modify: 2015-04-13 00:14:20.427990736 +0800 Change: 2015-04-13 00:14:20.427990736 +0800</p>

<p>#touch创建新文件</p>

<p>[rootQContOS test]# Is -1 test3</p>

<p>Is: cannot access test3: No such file or directory #touch创建新文件，新文件的大小为0</p>

<p>[root@CentOS test]# touch test3 [root@CentOS test]# stat test3</p>

<p>Access: 2015-04-13 00:14:55.482995805 十0800 Modify: 2015-04-13 00:14:55.482^95805+0800 Change: 2015-04-13 00:14:55.482995805 +0800</p>

<p>#指定参考文档</p>

<p>[root@CentOS test]# stat /bin/cp</p>

<p>Access: 2015-04-12 20:33:20.990998918 +0800 Modify: 2012-06-22 19:46:14.000000000 十0800 Change: 2015-04-11 03:23:17.783999344 4-0800</p>

<p>#将文件日期更改为参考文件的曰期</p>

<p>[rootQCentOS test]# touch -r /bin/cp test2 [root@CentOS test]# stat test2</p>

<p>Access: 2015-04-12 20:33:20 Modify: 2012-06-22 19:46:14 Change: 2015-04-13 00:16:40 #将文件修改日期调整为2天以前</p>

<p>990998918 +0800 000000000 +0800 671992418 +0800</p>

<p>[root@CentOS # date</p>

<p>Wed Apr 24 18:47:47 CST 2015 [rootQCentOS **]# stat /bin/cp Access: 2015-04-22 23:46:5fl.709648854 +0800 Modify: 2015-04-13 00:30:41.9399915X5 +0800 Change: 2015-04-13 00:30:41.939991515 +0800 [root®CentOS    # touch -d &ldquo;2 days ago&rdquo; /bin/cp</p>

<p>[rootQCentOS # stat /bin/cp Access: 2015-04-22 18:48:16.749620251 +0800 Modify: 2015-04-22 18:48:16.749620251 十0800 Change: 2015-04-24 18:48:16.746803440 +0800 #touch后面可以接时间，格式为[YYMMDDhhmm] [root@CentOS test]# touch -t &ldquo;01231215&rdquo; test2 [root@CentOS test]# stat test2 Access: 2015-01-23 12:15:00.000000000 +0800 Modify: 2015-01-23 12:15:00.000000000 4-0800 Change: 2015-04-13 00:28:08.753993511 +0800</p>

<p>A. 1.4删除文件rm</p>

<p>用户可以用rm命令删除不需要的文件。rm可以删除文件或目录，并且支持通配符，如目 录中存在其他文件则会递归删除。删除软链接只是删除链接，对应的文件或目录不会被删除， 软链接类似Windows系统中的快捷方式。如删除硬链接后文件存在，其他的硬链接文件内容 仍可以访问。</p>

<p>rm命令的一般形式为：rm [-dfirv][&ndash;help][~version][文件或目录…]。</p>

<p>如不加任何参数，rm不能删除目录。使用“r “或“R “选项可以删除指定的文件或目录 及其下面的内容。</p>

<p>【示例A-4】</p>

<p>#删除文件前提示用户确汄</p>

<p>[root@CentOS cmd] # rm -v -i src一aaaat</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-319.jpg" alt="img" /></p>

<p>rm: remove regular file &lsquo;src__aaaat1 ? y</p>

<p>removed ssrc_aaaat*</p>

<p>[root®CentOS cmd]# mkdix tmp [root®CentOS cmd]# cd tmp [root@CentOS tmp]# touch a [rootQCentOS tnqp]# cd ..</p>

<p>#如不加任何参数，rm不能删除目录</p>

<p>[root@CentOS cmd] # rm -v -i</p>

<p>rm: cannot remove &lsquo;tmp&rsquo;: Is a directory #删除目录需要使用r参数，-i表示删除前提示用户确认</p>

<p>[root®CentOS cmd]# rm -r -i -v tsnp</p>

<p>rm: descend into directory &lsquo;tmp1? y</p>

<p>&mdash;&mdash;• - &lsquo; r T-~— - 7&mdash;&ndash;7- &ldquo;-</p>

<p>CentOS 7系统管理与运维实战</p>

<p>rm: remove regular empty file &lsquo;tmp/s * ? y removed &lsquo;tmp/s* rm: remove directory &lsquo;tmp * ? y removed directory: &lsquo;tmp1 #使用通配符</p>

<p>[root@CentOS cmd]# rm -v -x src一aaa*</p>

<p>rm: remove regular file &lsquo; src__aaaaaf ? y removed v src_aaaaa * rm: remove regular file removed &lsquo;src_aaaab* rm: remove regular file removed &lsquo;src_aaaac1 rm: remove regular file removed v src_aaaad*</p>

<p>#强制删除，没提示确认 [root@CentOS cmd]# rm -f removed &lsquo;src_aaaar *</p>

<p>#硬链接与软链S区别演示</p>

<p>[root@CentOS link]# cat test.txt</p>

<p>this is file content #分别建立文件的软链接与硬链接</p>

<p>[root@CentOS link]# In -s test.txt test,txt.soft.link [root®CentOS link]# In test.txt test.txt.hard.link [root®CentOS link]# Is -1</p>

<p>&lsquo;total 8</p>

<p>&lsquo;src_aaaab*? y</p>

<p>ksrc_aaaac,? y</p>

<p>&lsquo;srG_aaaad * ? y</p>

<p>-v src aaaar</p>

<p>ns</p>

<table>
<thead>
<tr>
<th>-rw—r—r—</th>
<th>2</th>
<th>root</th>
<th>root</th>
<th>21</th>
<th>Mar</th>
<th>31</th>
<th>07:06</th>
<th>test.txt</th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>-rw~rr——</td>
<td>2</td>
<td>root</td>
<td>root</td>
<td>21</td>
<td>Mar</td>
<td>31</td>
<td>07:06</td>
<td>test.txt</td>
<td>.hard,</td>
<td>.link</td>
</tr>

<tr>
<td>Irwxrwxrwx</td>
<td>1</td>
<td>root</td>
<td>root</td>
<td>8</td>
<td>Mar</td>
<td>31</td>
<td>07:07</td>
<td>test.txt.</td>
<td>soft.</td>
<td>link</td>
</tr>
</tbody>
</table>

<p>-&gt; test.txt</p>

<p>林査看软链接的文件内•務</p>

<p>[root®CentOS link]# cat test.txt.soft.link</p>

<p>this is file content</p>

<p>#查看硬链接的文件内容</p>

<p>[root®CentOS link]# cat test.txt.hard.link</p>

<p>this is file content</p>

<p>#删除源文件</p>

<p>[root®CentOS link]# rm -f test.txt</p>

<p>#软链接指向的文件已经不存在</p>

<p>[root@CentOS link]# cat test.txt.soft.link</p>

<p>cat: test.txt.soft.link^ No such file or directory #硬链接指向的文件内容依然存在</p>

<p>[root@CentOS link]# cat test.txt.hard.link</p>

<p>this is file content</p>

<p>，繼</p>

<p>使用rm命令一定要小心。文件一旦被删除不能恢复，为防止勿删除文件，可以使用“i” 选项来逐个确认要删除的文件并逐个确认是否要删除。使用“f”选项删除文件或目录时不给</p>

<p>予任何提示。各个选项可以组合使用，例如使用“rf”选项可以递归删除指定的目录而不给予 任何提示=</p>

<p>删除有硬链接指向的文件时，使用硬链接仍然可以访问文件原来的内容，这点与软链接是</p>

<p>不同的。</p>

<table>
<thead>
<tr>
<th>gaa要＞ij雜i竹符为‘■</th>
<th>的文件（例如’-foo’），请使用以下方法之一：</th>
<th>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;及</th>
</tr>
</thead>

<tbody>
<tr>
<td>rm &ndash; -foo</td>
<td></td>
<td></td>
</tr>

<tr>
<td>rm ./-foo</td>
<td></td>
<td></td>
</tr>

<tr>
<td>査看文件 cat tac more less</td>
<td>tac tail</td>
<td></td>
</tr>
</tbody>
</table>

<p>A.1.5查看文件</p>

<p>如果要查看文件，使用cat less tac tail more任意一个即可。</p>

<p>\1. cat</p>

<p>使用cat命令查看文件时会显示整个文件的内容，注意cat只能查看文本内容的文件，如 查看二进制文件，则屏幕会显示乱码。另外cat可创建文件，合并文件等。cat命令语法为cat [-AbeEnstTuv] [—help] [—version] fileName。</p>

<p>【示例A-5】</p>

<p>#査看系统网络配置文件</p>

<p>【root@CentOS cmd】# cat /etc/sysconfig/network-scripts/ifcfg-ethO</p>

<p>DEVICE=ethO</p>

<p>HWADDR=00:0C:29:7F:08:9D TYPE=Ethernet</p>

<p>UUID=3268d86a-3245-4afa-94e0-fl00a8efae44 QNBOOT=yes BOOTPROTO=s tat i c BROADCAST-192.168.78.255 IPADDR=192.168.78,100 NETMASK=255.255.255.0 #显示行号，空白行也进行编号 (rootQCentOS cmd]# cat -n a 1 12</p>

<p>#对空白行不编号</p>

<p>[root@CentOS cmd]# cat -b a</p>

<p>1 12 2 13</p>

<p>3    45</p>

<p>4    45</p>

<p>#filel文件内容</p>

<p>[rootsCentOS cmd]# cat filel</p>

<p>1</p>

<p>2</p>

<p>3</p>

<p>#file2文件内容</p>

<p>[root@CentOS cmd]# cat file2</p>

<p>4</p>

<p>5</p>

<p>6</p>

<p>#文件内容合并</p>

<p>[rootgCentOS cmd]# cat filel file2 &gt;file [root@CentOS cmd]# cat file一1一2</p>

<p>1</p>

<p>2</p>

<p>3</p>

<p>4</p>

<p>5</p>

<p>6</p>

<p>#创建文件</p>

<p>[root@CentOS cmd]# cat &gt;file一 1一2</p>

<p>a</p>

<p>b</p>

<p>c .</p>

<p>d</p>

<p>e</p>

<p>#按以1?1-0结束</p>

<p>[rootQCentOS cmd]# cat file一 1 一2</p>

<p>a</p>

<p>b</p>

<p>c</p>

<p>d</p>

<p>e</p>

<p>#追加内容</p>

<p>[rootQCentOS cmd] # cat »fil©JL」2</p>

<p>cc</p>

<p>dd</p>

<p>#按（：1:^.~0结束</p>

<p>#査看追加的文件内容</p>

<p>[root®CentOS cmd]# cat</p>

<p>3</p>

<p>c</p>

<p>d</p>

<p>e</p>

<p>cc</p>

<p>dd</p>

<p>使用cat可以复制文件，包括文本文件、二进制文件或ISO光盘文件等。</p>

<p>\2. more 和 less</p>

<p>使用cat命令查看文件时，如一文件有很多行，会出现滚屏的问题，这时可以使用more 或less查看，more和less可以和其他命令结合使用，也可以单独使用。</p>

<p>more命令使用space空格键可以向后翻页，“b”向前翻页。帮助可以选择“h”，更多使 用方法可以使用“matimore”查看帮助文档。</p>

<p>【示例A-6]</p>

<p>[root@CentOS # wc -1 more.txt</p>

<p>135 more.txt</p>

<p>#当一屏显示不下时会显示文件的一部分</p>

<p>#用分页的方式显示一个文件的内容</p>

<p>[root@CentOS 〜]# more more.txt</p>

<p>#部分显示结果省略</p>

<p>SPACE    Display next k lines of text. Defaults to current screen</p>

<p>——More一-(45%)</p>

<p>#和其他命令结合使用 [root径CentOS #</p>

<p>man morelmore cat -n src.txt</p>

<p>[root@CentOS -3 #</p>

<p>1 0</p>

<p>2 1</p>

<p>3</p>

<p>4</p>

<p>[root@CentOS</p>

<p>more ~s src.txt</p>

<p>敛汎i访:&lsquo;s’漆為错&rsquo;叫御麻賊婚每&rsquo;燧奴淼iA</p>

<p>#从第6行开始显示文件内容</p>

<p>[rootQCentOS # more +6 src.txt</p>

<p>3</p>

<p>4</p>

<p>5    .:</p>

<p>#more -c -10 examplel.c %执行该命令后，先清屏，然后将以每10行每10行的方式显示文件 example.c 的内容。</p>

<p>[root@CentOS # more -c 一10 src,txt 0 1</p>

<p>2 &hellip; ■.</p>

<p>4</p>

<p>+、5 .&lsquo;厂</p>

<p>，:、</p>

<p>7</p>

<p>8 9</p>

<p>&ndash;More&ndash;(2%)</p>

<p>在more命令的执行过程中，用户可以使用more自己的一系列命令动态地根据需要来选 择显示的部分。more在显示完一屏内容之后，将停下来等待用户输入某个命令。</p>

<p>less命令的功能几乎和more命令一样，也是用来按页显示文件，不同之处在于less命令 在显示文件时允许用户既可以向前又可以向后翻阅文件。用less命令显示文件时，若需要在文 件中往前移动，按“b”键；要移动到用文件的百分比表示的某位置，则指定一个0~100之间 的数，并按“P”即可。less命令的使用与more命令类似，在此就不赘述了，用户如有不清楚 的地方可直接查看联机帮助。</p>

<p>\3. tail</p>

<p>tail和less类似。tail可以指定显示文件的最后多少行，并可以滚动显示日志。</p>

<p>A.1.6查看文件或目录find</p>

<p>fmd命令可以根据给定的路径和表达式查找指定的文件或目录。fmd参数选项很多，并且 支持正则，功能强大。和管道结合使用可以实现复杂的功能，是系统管理者和普通用户必须掌 握的命令。find如不加任何参数，表示查找当前路径下的所有文件和目录。</p>

<p>【示例A-7】</p>

<p>[root@CentOS nginx]# Is -1</p>

<p>total 12</p>

<p>drwxr-xr-x.    2    root    root    4096    Apr    24    22:34    conf</p>

<p>drwxr-xr-x.    2    root    root    4096    Apr    11    03:15    html</p>

<p>&gt; /data/logs</p>

<p>一name</p>

<p>lrwxrwxrwx.    1    root    root    10    Apr    24    22:36    logs</p>

<p>drwxr-xr-x.    2    root    root    4096    Apr    11    03:15    sbin</p>

<p>#査找当前目录下的所有文件，此命令等效于find .或find . [rootOCentOS nginx]# find</p>

<p>/conf</p>

<p>/conf/nginx.conf</p>

<p>./html</p>

<p>./html/index.html ./htmlZ50x.html ./sbin</p>

<p>./sbin/nginx ./logs</p>

<p>#-print表示将结果打印到标准输出 [root@CentOS nginx]# find -print</p>

<p>./res ./conf</p>

<p>,/conf/nginx.conf ./html</p>

<p>./html/index.html •/html/50x.html ./sbin ./sbin/</p>

<p>#指定路径査找</p>

<p>[root@CentOS nginx]番 find /data/logs /data/logs</p>

<p>/data/logs/error.log /data/logs/access.log /data/logs/nginx.pid</p>

<p>如忘记某个文件的位置，可使用以下命令查找指定文件，如执行完毕没有任何输出，则表 示系统中不存在此文件。使用name选项，文件名选项是fmd命令最常用的选项，要么单独使 用该选项，要么和其他选项一起使用。可以使用某种文件名模式来匹配文件，记住要用引号将 文件名模式引起来。不管当前路径是什么，如需在自己的根目录$HOME中查找文件名符合</p>

<p>的文件，可以使用~作为路径参数，波浪号“〜”代表了当前用户的主目录。</p>

<p>A.1.7过滤文本grep</p>

<p>grep是一种强大的文本搜索工具命令，用于查找文件中符合指定格式的字符串，支持正 则表达式。如不指定任何文件名称，或是所给予的文件名为则grep命令从标准输入设 备读取数据。grep家族包括grep、egrep和fgrep。egrep和fgrep的命令只跟grep有很小不同。 egrep是grep的扩展。fgrep就是fixed grep或fast grep，该命令使用任何正则表达式中的元字 符表示其自身的字面意义，不再特殊。其中egrep就等同于“grep-E”，fgrep等同于“grep-F “。Linux中的grep功能强大，支持很多丰富的参数，可以方便地进行一些文本处理工作。</p>

<p>grep单独使用时至少有两个参数，如少于两个参数，grep会一直等待，直到该程序被中 断。如果遇到了这样的情况，可以按“Ctrl+c”终止。默认情况下只搜索当前目录，如果递归 查找子目录，可使用“r”选项。</p>

<p>【示例A-8】</p>

<p>#在措定文件中査找特定字符串</p>

<p>[root@C©nfcOS grep root /etc/passwd</p>

<p>root❌0:0:root:/root:/bin/bash</p>

<p>operator❌11:0:operator:/root:/sbin/nologin</p>

<p>#结合管道一起使用</p>

<p>[rootGCentOS 〜]# cat /etc/passwd | grep root</p>

<p>root❌0:0:root:/root:/bin/bash</p>

<p>operator❌11:0:operator:/root:/sbin/nologin</p>

<p>#将显示符合条件的内容所在的行号</p>

<p>[root@CentOS ~]# grep -n root /etc/passwd</p>

<p>1:root❌0:0:root:/root:/bin/bash</p>

<p>30:operator:x;11:0:operator:/root:/sbin/nologin</p>

<p>#在nginx.conf査找包含listen的行号打印出来</p>

<p>[rootQCentOS conf]# grep listen nginx.conf</p>

<p>listen    80;</p>

<p>#结合管道联合使用，其中/sbin/ifconfig表示査看当前系统的网络配置信息，后査找包含“inet addr”的字符串，第2行为査找的结果</p>

<p>[root^CentOS etc]# cat filel</p>

<p>[mysqld]</p>

<p>datadir—Zvar/lib/inysql socket=/var/lib/mysql/mysql.seek user=mysql</p>

<p>[root@CentOS etc]# grep var filel</p>

<p>datadir=/var/lib/mysql socket-/var/lib/mysql/mysql.sock</p>

<p>[root@CentOS etc] # grep -v var filel</p>

<p>[mysqld] user-mysql #显示行号</p>

<p>[root@CentOS etc]# grep -n var filel</p>

<p>2 :datadir=/var/lib/inysql 3:socket=/var/lib/mysql/mysql.sock</p>

<p>[root@CentOS nginx]# /sbin/ifconfig|grep &ldquo;inet addr&rdquo;</p>

<p>inet addr:192,168,fl.l00 Beast:192.168.fl.255 Mask:255.255.255.0</p>

<p>#综合使用</p>

<p>$ grep magic /usr/src/linux/Documentation/* | tail #査看文件内容</p>

<p>[root@CentOS etc]# cat test.txt</p>

<p>default=0</p>

<p>timeout=5</p>

<p>splashimage=(hdO,0)/boot/grub/splash.xpm. gz hiddenmenu</p>

<p>title CentOS (2,6.32-358.el6.x86_64) root (hdO,0)</p>

<p>kernel /boot/vmlinuz-2.6.32-358.el6.x86_64 ro root=UUID=d922ef3b-d473~40a8-a7a2</p>

<p>initrd /boot/initramfs-2.6.32-358.el6.x86_64.img #査找指定字符串，此时是区分大小写    -</p>

<p>[rootGCentOS etc]# grep uuid test.txt [root@CentOS etc]# grep UUID test.txt</p>

<p>kernel /boot/vmlinuz-2.6.32-358 .el6 . x86__64 ro root-UUID-d922ef3b-d473~40a8-a7a2</p>

<p>F不区分大小写査找指定字符串</p>

<p>[root@CentOS etc]# grep ~i uuid test.txt</p>

<p>kernel /boot/vmlinuz-2.6.32-358.el6.x86_64 ro root-UUID=cJ922ef3b-d473-40a8-a7a2 #列出匹配字符串的文件名</p>

<p>[root@CentOS etc]# grep -1 UUID test.txt</p>

<p>test.txt</p>

<p>[root@CentOS etc]# grep -L UUID test.txt</p>

<p>#列出不匹配字符串的文件名</p>

<p>[rootQCentOS etc]# grep -L uuid test.txt</p>

<p>test.txt #匹配整个单词</p>

<p>[root@CentOS etc]# grep -w UU test.txt [root@CentOS etc]# grep -w UUID test.txt</p>

<p>kernel /boot/vmlinuz-2.6.32-358 .el6 . x86__64 ro root-UUID=d922ef3b-d473-40a8-a7a2</p>

<p>#除了显示匹配的行，分别显示该行上下文的N行</p>

<p>[rootQCentOS etc]# grep -Cl UUID test.txt</p>

<p>root (hdOr 0)</p>

<p>kernel /boot/vmlinuz-2.6.32-358,el6.x86_64 ro root=UUID=d922ef3b-d473-40a8-a7a2</p>

<p>initrd /boot/initramfs~2.6.32-358.el6.x86_64.img</p>

<p>[root@CentOS etc]# grep -n -E ”A[a-z]+&rdquo; test.txt</p>

<p>l:default=0 2:timeout=5</p>

<p>3:splashimage=(hdOz 0)/boot/grub/splash.xpm.gz</p>

<p>4:hiddenmenu</p>

<p>5:title CentOS (2.6.32-358.el6.x86_64)</p>

<p>[root@CentOS etc]# grep -n ~E ”A[Aa-z】+&rdquo; test.txt</p>

<p>6:    root (hdOz 0)</p>

<p>7:    kernel /boot/vmlinuz-2.6.32-358,el6.x86_64 ro</p>

<p>root-UUID=d922ef3b-d473-40a8~a7a2</p>

<p>8:    initrd /boot/initramf s-2.6.32-358 .el6 .x86__64 . img</p>

<p>#按正则表达式査找指定字符串</p>

<p>[root@CentOS etc]# cat my.cnf</p>

<p>[mysqld]</p>

<p>datadir=/var/lib/mysql socket-/var/lib/mysql/mysql.sock user=mysql</p>

<p>#按正则表达式査找</p>

<p>[rootQCentOS etc]# grep ~E ndatadir|socket&rdquo; my.cnf</p>

<p>datadir=/var/lib/mysql socket=/var/lih/mysql/inysql. sock</p>

<p>[root@CentOS etc]# grep 町sql 町.cnf</p>

<p>tmysqld]</p>

<p>datadir=/var/lib/mysql socket=/var/lib/mysql/mysql.sock user=mysql</p>

<p>#结合管道一起使用</p>

<p>[rootgCentOS etc]# grep mysql my.cnf Igrep datadir</p>

<p>datadir=/var/lib/mysql #递归査找</p>

<p>[root@CentOS etc]# grep -r var ,(head -3</p>

<p>./rc5.d/K50netconsole; touch /var/lock/subsys/netconsole .Zrc5.d/K50netconsole: rm ~f /var/lock/subsys/netconsole ./rc5.d/K50netconsole: [ -e /var/lock/subsys/netconsole ] &amp;&amp; restart</p>

<p>grep支持丰富的正则表达式，常见的正则元字符含义如表A.1所示。</p>

<p>表A.1 grep正则参数说明</p>

<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>

<tbody>
<tr>
<td>A</td>
<td>指定匹配字符串的行首</td>
</tr>

<tr>
<td>$</td>
<td>指定匹配字符串的结尾</td>
</tr>

<tr>
<td>*</td>
<td>表示0个以上的字符</td>
</tr>

<tr>
<td>+</td>
<td>表示1个以上的字符</td>
</tr>

<tr>
<td></td>
<td>去掉指定字符的特殊含义</td>
</tr>

<tr>
<td>A</td>
<td>指定行的开始</td>
</tr>

<tr>
<td>$</td>
<td>指定行的结束</td>
</tr>

<tr>
<td></td>
<td>匹配一个非换行符的字符</td>
</tr>

<tr>
<td>*</td>
<td>匹配零个或多个先前字符</td>
</tr>

<tr>
<td>[]</td>
<td>匹配一个指定范围内的字符</td>
</tr>

<tr>
<td>[八]</td>
<td>匹配一个不在指定范围内的字符</td>
</tr>

<tr>
<td></td>
<td>标记匹配字符</td>
</tr>

<tr>
<td>&lt;</td>
<td>指定单词的开始</td>
</tr>

<tr>
<td>&gt;</td>
<td>指定单词的结束</td>
</tr>

<tr>
<td>x{m}</td>
<td>重复字符X，m次</td>
</tr>

<tr>
<td>x{m，}</td>
<td>重复字符X，至少m次</td>
</tr>

<tr>
<td>x{m,n}</td>
<td>重复字符x,至少m次，不多于n次</td>
</tr>

<tr>
<td>w</td>
<td>匹配文字和数字字符，也就是[A-Za-zO-9]</td>
</tr>

<tr>
<td>b</td>
<td>单词锁定符</td>
</tr>

<tr>
<td>+</td>
<td>匹配一个或多个先前的字符</td>
</tr>

<tr>
<td>?</td>
<td>匹配零个或多个先前的字符</td>
</tr>
</tbody>
</table>

<p>（续表）</p>

<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>

<tbody>
<tr>
<td>a|b|c</td>
<td>匹配a或b或c</td>
</tr>

<tr>
<td>0</td>
<td>分组符号</td>
</tr>

<tr>
<td>[:alnum:]</td>
<td>文字数字字符</td>
</tr>

<tr>
<td>[■.alpha:]</td>
<td>文字字符</td>
</tr>

<tr>
<td>[:digit:]</td>
<td>数字字符</td>
</tr>

<tr>
<td>[:graph:]</td>
<td>非空格、控制字符</td>
</tr>

<tr>
<td>[dower:]</td>
<td>小写字符</td>
</tr>

<tr>
<td>[:cntrl:]</td>
<td>控制字符</td>
</tr>

<tr>
<td>[:print:]</td>
<td>非空字符（包括空格）</td>
</tr>

<tr>
<td>[:punct:]</td>
<td>标点符号</td>
</tr>

<tr>
<td>[:space:]</td>
<td>所有空白字符（新行，空格，制表符）</td>
</tr>

<tr>
<td>[:upper:]</td>
<td>大写字符</td>
</tr>

<tr>
<td>[:xdigit:]</td>
<td>十六进制数字（0-9, a-f, A-F）</td>
</tr>
</tbody>
</table>

<p>A.1.8比较文件差异diff</p>

<p>diff命令的功能为逐行比较两个文本文件，列出其不同之处。它对给出的文件进行系统的 检查，并显示出两个文件中所有不同的行，以便告知用户为了使两个文件filel和file2 —致， 需要修改它们的哪些行，比较之前不要求事先对文件进行排序。如果diff命令后跟的是目录， 则会对该目录中的同名文件进行比较，但不会比较其中子目录。</p>

<p>【示例A-9】</p>

<p>[root@CentOS conf]# head nginx.conf I cat -n 1</p>

<p>2    #user nobody;</p>

<p>3    worker^processes 1;</p>

<p>4</p>

<p>5    #error_log logs/error.log;</p>

<p>6    #error_log logs/error.log notice;</p>

<p>7    #error一log logs/error.log info;</p>

<p>8</p>

<p>9 #pid    logs/nginx.pid;</p>

<p>10</p>

<p>[root@CentOS conf]# head nginx.conf.bak |cat -n 1</p>

<p>2    worker一 processes 1;</p>

<p>3</p>

<p>4    error_log logs/error.log;</p>

<p>5    error_log logs/error.log notice;</p>

<p>6    error_log logs/error.log info;</p>

<p>7</p>

<p>8    pid</p>

<p>9</p>

<p>10</p>

<p>logs/nginx.pid;</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-322.jpg" alt="img" /></p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-323.jpg" alt="img" /></p>

<p>#比较文件差异</p>

<p>[root@CentOS conf]# diff nginx.conf nginx.conf.bak 1 cat -n</p>

<table>
<thead>
<tr>
<th>I</th>
<th>2dl</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>2</td>
<td>&lt;</td>
<td>#user</td>
<td>nobody;</td>
<td></td>
<td></td>
</tr>

<tr>
<td>3</td>
<td>5,</td>
<td>7c4,6</td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>4</td>
<td>&lt;</td>
<td>#error</td>
<td></td>
<td>logs/error.log;</td>
<td></td>
</tr>

<tr>
<td>5</td>
<td>&lt;</td>
<td>#error</td>
<td>__log</td>
<td>logs/error.log</td>
<td>notice;</td>
</tr>

<tr>
<td>67</td>
<td>&lt;</td>
<td>#error</td>
<td>一log</td>
<td>logs/error.log</td>
<td>info;</td>
</tr>

<tr>
<td>i8</td>
<td>&gt;</td>
<td>error_</td>
<td>log</td>
<td>logs/error.log;</td>
<td></td>
</tr>

<tr>
<td>9</td>
<td>&gt;</td>
<td>error一</td>
<td>log</td>
<td>logs/error.log</td>
<td>notice;</td>
</tr>

<tr>
<td>10</td>
<td>&gt;</td>
<td>error_</td>
<td>log</td>
<td>logs/error.log</td>
<td>info;</td>
</tr>

<tr>
<td>11</td>
<td>9c8</td>
<td></td>
<td>\ 厂 a ’ d</td>
<td></td>
<td></td>
</tr>

<tr>
<td>12</td>
<td>&lt;</td>
<td>#pid</td>
<td></td>
<td>logs/nginx.pid;</td>
<td></td>
</tr>

<tr>
<td>13</td>
<td>-•</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>14</td>
<td>&gt;</td>
<td>pid</td>
<td>logs/nginx.pid;</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-324.jpg" alt="img" /></p>

<p>在上述比较结果中，“&lt;”开头的行属于第1个文伟以“&gt;”开头的行属于第2个文件。 字母a、d和c分别表示附加、删除和修改操作。</p>

<p>A.1.9在文件或目录之间创建链接In</p>

<p>In命令用在连接文件或目录，如同时指定两个以上的文件或目录，且最后的目的地是一 个已经存在的目录，则会把前面指定的所有文件或目录复制到该目录中。若同时指定多个文件 或目录，且最后的目的地并非是一个已存在的目录，则会出现错误信息。In命令会保持每一 处链接文件的同步性，也就是说，改动其中一处其他地方的文件都会发生相同的变化。</p>

<p>In的链接分为软链接和硬链接。软链接只会在目的位置生成一个文件的链接文件，实际 不会占用磁盘空间，相当于Windows中的快捷方式。硬链接会在目的位置上生成一个和源文 件大小相同的文件。无论是软链接还是硬链接，文件都保持同步变化。软链接是可以跨分区的， 但是硬链接必须在同一个文件系统，并且不能对目录进行硬链接，而符号链接可以指向任意的 位置。</p>

<p>【示例A-10】</p>

<p>[root@CentOS In]# In -s /data/ln/src /data/ln/dst</p>

<p>[root@CentOS In]# Is -1</p>

<p>total 0</p>

<p>lrwxrwxrwx. 1 root root 12 Jun 3 23:19 dst -&gt; /data/ln/src</p>

<p>-rw—r-~r&ndash;. 1 root root 0 Jun 3 23:19 src</p>

<p>[root@CentOS In]# echo nsrc° &gt;src</p>

<p>#当源文件内容改变时，软链接指向的文件内容也会改变</p>

<p>[root@CentOS In]# cat src</p>

<p>src</p>

<p>[root@CentOS In]# cat dst</p>

<p>src</p>

<p>#创建硬链接</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-325.jpg" alt="img" /></p>

<p>[root@CentOS In]# In /data/ln/src /data/ln/dst_hard</p>

<p>#査看文件硬链接信息    ~</p>

<p>[root@CentOS In]# Is -1</p>

<p>total 8</p>

<p>-rw-r&ndash;r~-. 2 root root 4 Jun 3 23:27 dst__hard -rw-r&ndash;r&ndash;. 2 root root 4 Jun 3 23:27 src</p>

<p>[root@CentOS In)# cat dst 一 hard</p>

<p>src</p>

<p>#删除源文件</p>

<p>[root@CentOS In]# rm src [root@CentOS In]# Is</p>

<p>dst dst_hard</p>

<p>#软链接指向的文件内容已经不存在</p>

<p>[rootQCentOS In]# cat dst</p>

<p>cat: dst: No such file or directory</p>

<p>#硬链接文件内容依然存在</p>

<p>[root@CentOS In]# cat dst 一 hard</p>

<p>src</p>

<p>[root@CentOS In]# cd ..</p>

<p>[rootQCentOS data]# mkdir ln2</p>

<p>#对某一-固录中的所有文件和s录建立连接</p>

<p>[root@CentOS data]# In -s /data/ln/* /data/ln2 [root@CentOS data]# Is -1 ln2</p>

<p>total 0</p>

<p>1111</p>

<p>VggggKB</p>

<p>蓮讀霧■鬚:::：;</p>

<p>llilili!</p>

<p>鑛</p>

<p>i顯讓;;嚷償囊鬚:穩s</p>

<p>画囑團i圓</p>

<p>f&rsquo;藝蒙a</p>

<p>J::::，.、</p>

<p>懸8®湯iBIi!</p>

<p>屬园誦</p>

<p>一liil</p>

<p>11</p>

<table>
<thead>
<tr>
<th>lrwxrwxrwx.</th>
<th>1</th>
<th>root</th>
<th>root</th>
<th>17</th>
<th>Jun</th>
<th>3</th>
<th>23:22</th>
<th>dst_hard</th>
<th>-&gt; /data/ln/dst_hard</th>
</tr>
</thead>

<tbody>
<tr>
<td>lrwxrwxrwx.</td>
<td>1</td>
<td>root</td>
<td>root</td>
<td>14</td>
<td>Jun</td>
<td>3</td>
<td>23:22</td>
<td>file.l -&gt;</td>
<td>/data/ln/filel</td>
</tr>

<tr>
<td>lrwxrwxrwx.</td>
<td>1</td>
<td>root</td>
<td>root</td>
<td>14</td>
<td>Jun</td>
<td>3</td>
<td>23:22</td>
<td>file2.-&gt;</td>
<td>/data/ln/file2</td>
</tr>

<tr>
<td>lrwxrwxrwx.</td>
<td>1</td>
<td>toot</td>
<td>root</td>
<td>14</td>
<td>Jun</td>
<td>3</td>
<td>23:22</td>
<td>file3 -&gt;</td>
<td>/data/ln/file3</td>
</tr>

<tr>
<td>lrwxrwxrwx.</td>
<td>1</td>
<td>root</td>
<td>root</td>
<td>14</td>
<td>Jun</td>
<td>3</td>
<td>23:22</td>
<td>lndir -&gt;</td>
<td>/data/ln/lndir</td>
</tr>
</tbody>
</table>

<p>■9鵬</p>

<p>3霧:諺伽</p>

<p>硬链接指向的文件进行读写和删除操作的时候，效果和符号链接相同。删除硬链接文件的 源文件，硬链接文件仍然存在，可以将硬链接指向的文件认为是不同的文件，只是具有相同的 内容。</p>

<p>A.1.10显示文件类型file</p>

<p>file命令用来显示文件的类型，对于每个给定的参数，该命令试图将文件分类为文本文件、 可执行文件、压缩文件或其他可理解的数据格式。</p>

<p>【示例A-11]</p>

<p>#显示文件类型</p>

<p>[root®CentOS conf]# file magic</p>

<p>magic: magic text file for file(1) cmd #不显示文件名称，只显示文件类型</p>

<p>root@CentOS conf]# file -b magic</p>

<p>magic text file for file(1) cmd 并显示文件magic信息</p>

<p>[root@CentOS conf]# file -i magic</p>

<p>magic: text/plain; charset^utf-8 #可执行文件</p>

<p>[rootQCentOS conf]# file /bin/cp</p>

<p>/bin/cp: ELF 64-bit LSB executable, AMD x86-64f version 1 (SYSV) , for GNU/Linux 2.6.4, dynamically linked (uses shared libs), for GNU/Linux 2.6.4, stripped</p>

<p>[root@CentOS conf]# In -s /bin/cp cp [root@CentOS conf]# file cp</p>

<p>cp: symbolic link to &lsquo;/bin/cp*</p>

<p>#显示链接指向的实际文件的相关信息</p>

<p>[root@CentOS conf]# file -L cp</p>

<p>cp: ELF 64-bit LSB executable, AMD x86-64, version 1 (SYSV) , for GNU/Linux 2.6.4, dynamically linked (uses shared libs), for GNU/Linux 2.6.4, stripped</p>

<p>A.1.11分割文件split</p>

<p>当处理文件时，有时需要将文件做分隔处理，split命令用于分割文件，可以分割文本文件, 按指定的行数分隔，每个分隔后的文件都包含相同的行数。split可以分隔非文本文件，分割时 可以指定每个文件的大小，分隔后的文件有相同的大小。split后的文件可以使用cat命令组装 在一起。</p>

<p>【示例A-12]</p>

<p>[root@CentOS cmd]# cat src.txt 0 1 2</p>

<p>3</p>

<p>4 ■3 6</p>

<p>7</p>

<p>8 9</p>

<p>[root@CentOS cmd]# split [rootQCentOS cmd]# Is dst.txt src.txt xaa xab</p>

<p>src.txt</p>

<p>xac</p>

<p>#split默认按1000行分隔文件 [root0CentOS cmd]# Is src.txt xaa xab xac [root^CentOS cmd]# wc -1 *</p>

<p>2004 src*txt 1000 xaa</p>

<p>1000 xab 4 xac</p>

<p>[root@CentOS cmd]# Is -Ihtr total 8.OK</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-326.jpg" alt="img" /></p>

<p>-rw-r&ndash;r&ndash;. 1 root root 53 Apr 22 18:35 src.txt ~rw-r&ndash;r-~. 1 root root 53 Apr 22 18:35 xaa [root@GentOS cmd]# rm xaa</p>

<p>rm: remove regular file &lsquo;xaa1? y #按每个文件3行分隔文件</p>

<p>[root@CentOS cmd】# split -1 3 src.txt [root@C©ntOS cmd]# Is src.txt xaa xab xac</p>

<table>
<thead>
<tr>
<th>-rw-r—r—.</th>
<th>1</th>
<th>root</th>
<th>root</th>
<th>8</th>
<th>Apr</th>
<th>22</th>
<th>18:35</th>
<th>xad</th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>r    r —* ~ r —* — •</td>
<td>1</td>
<td>toot</td>
<td>root</td>
<td>9</td>
<td>Apr</td>
<td>22</td>
<td>18:35</td>
<td>xae</td>
<td></td>
</tr>

<tr>
<td>-rw-rr.</td>
<td>1</td>
<td>root</td>
<td>root</td>
<td>9</td>
<td>Apr</td>
<td>22</td>
<td>18:35</td>
<td>xaf</td>
<td></td>
</tr>

<tr>
<td></td>
<td>1</td>
<td>root</td>
<td>root</td>
<td>9</td>
<td>Apr 22</td>
<td>18:35</td>
<td>xag</td>
<td></td>
<td></td>
</tr>

<tr>
<td>[root@CentOS</td>
<td>cmd] #</td>
<td>cat xa*</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p>0</p>

<p>1</p>

<p>2</p>

<p>#中间结果省略</p>

<p>2003</p>

<p>[root@CentOS cmd]# cat xaa</p>

<p>0</p>

<p>1</p>

<p>2</p>

<p>#如文件行数太多，使用默认的2个字符已经不能满足需求</p>

<p>[root@CentOS cmd]# split -1 3 src.txt</p>

<p>split: output file suffixes exhausted</p>

<p>[root@CentOS cmd]# rm -f xa*</p>

<p>[rootQCentOS cmd]# Is</p>

<p>src.txt</p>

<p>#指定分隔前缀的长度</p>

<p>[root@CentOS cmd]# split ~a 5    3 src.txt</p>

<p>[robt@CentOS cmd]# Is</p>

<p>src.txt xaaaaa xaaaab xaaaac xaaaad xaaaae xaaaaf xaaaag [root@CentOS cmd]# cat xaaaaa 0</p>

<p>2</p>

<p>froot@CentOS cmd]# rm xaaaa*</p>

<p>#使用数字前缀</p>

<p>[rootsCentOS cmd] # split -a 5 -1 3 -d src.txt [root@CentOS cmd]# Is</p>

<p>src.txt xOOOOO xOOOOl x00002    x00003    x00004    x00005    x00006</p>

<p>[root@CentOS cmd]# cat xOOOOO</p>

<p>0</p>

<p>1</p>

<p>2</p>

<p>#指定每个文件的大小，默认为字节，可以使用类似的参数 默认为B，另外有单位等</p>

<p>SIZE可加入单位：b代表512, k代表IK, m代表1 Meg [root@CentOS cmd]# split -a 5    3 src.txt</p>

<p>[root@CentOS cmd]# Is</p>

<p>src.txt xaa xab xac xad xae xaf xag xah xai xaj xak xal xam xan xao xap xaq xar</p>

<p>[root@CentOS cmd]# Is -1 xaaaaa</p>

<p>-rw~r——r—-. 1 root root 3 Apr 22 18:55 xaaaaa</p>

<p>[root@CentOS cmd] # src.txt xaa xaaaaa xaaaab xaaaac xaaaad xaaaae xaaaaf xaaaag</p>

<p>[root@CentOS cmd]# cat xa* &gt;dst.txt</p>

<p>[root@CentOS cmd]# md5sum src.txt dst.txt</p>

<p>74437cf5bf0caab73a2fedf7ade51e67 src.txt</p>

<p>74437cf5bf0caab73a2fedf7ade51e67 dst.txt</p>

<p>#指定分隔前缀</p>

<p>[root@CentOS cmd]# split -a 5 -b 3000 src.txt src_</p>

<p>[root@CentOS cmd]# Is</p>

<p>dst.txt    src一aaaac src_aaaag src_aaaak src 一aaaao</p>

<p>当把一个大的文件分拆为多个小文件后，如何校验文件的完整性呢，一般通过MD5工具 来校验对比。对应的Linux命令为md5sum»</p>

<p>有关md5的校验机制和原理请参考相关文档，本节不再赘述。</p>

<p>A.1.12合并文件join</p>

<p>如果需要将两个文件根据某种规则连接起来，join可以完成这个功能，该命令可以找出两 个文件中指定列内容相同的行，并加以合并，再输出到标准输出设备。</p>

<p>【示例A-13】</p>

<p>[root@CentOS conf]# cat -n src</p>

<p>1    abrt /etc/abrt /sbin/nologin</p>

<p>2    adm adm /var/adm</p>

<p>3    avahi-autoipd Avahi IPv4LL</p>

<p>4    bin bin /bin</p>

<p>5    daemon daemon /sbin</p>

<p>6    dbus System message</p>

<p>7    ftp FTP User</p>

<p>8    games games /usr/games</p>

<p>9    gdm /var/lib/gdm /sbin/nologin 10 gopher gopher /var/gopher</p>

<p>[root@CentOS conf]# cat -n dst</p>

<p>1    abrt</p>

<p>2    adm 99999 7</p>

<p>3    avahi-autoipd</p>

<p>4    bin 99999 7</p>

<p>5    daemon 99999 7</p>

<p>6    dbus</p>

<p>7    ftp 99999 7</p>

<p>8    games 99999 7</p>

<p>9    gdm</p>

<p>10 gopher 99999 7</p>

<p>[root@CentOS conf]# join src dst I cat -n</p>

<p>1    abrt /etc/abrt /sbin/nologin</p>

<p>2    adm adm /var/adm 99999 7</p>

<p>3    avahi-autoipd Avahi IPv4LL</p>

<p>4    bin bin /bin 99999 7</p>

<p>5    daemon daemon /sbin 99999 7</p>

<p>6    dbus System message</p>

<p>7    ftp FTP User 99999 7</p>

<p>8    games games /usr/games 99999 7</p>

<p>9    gdm /var/lib/gdm /sbin/nologin</p>

<p>10    gopher gopher /var/gopher 99999 7 #指定输出特定的列</p>

<p>[root@CentOS conf]# join -ol.l -o2.2,2.3 src dst abrt</p>

<p>adm 99999 7</p>

<p>avahi-autoipd</p>

<p>bin 99999 7</p>

<p>daemon 99999 7</p>

<p>dbus</p>

<p>ftp 99999 7</p>

<p>games 99999 7</p>

<p>gdm</p>

<p>gopher 99999 7</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-327.jpg" alt="img" /></p>

<p>A. 1.13文件权限umask</p>

<p>umask用于指定在建立文件时预设的权限掩码。权限掩码是3个八进制的数字所组成，将</p>

<p>现有的存取权限减掉权限掩码后，即可产生建立文件时预设的权限。</p>

<p>需要注意的是文件基数为666,目录为777，即文件可设x位，目录可设x位。chmod改</p>

<p>变文件权限位时设定哪个位，那么哪个位就有权限；而umask是设定哪个位，则哪个位上就 没权限。当完成一次设定后，只针对当前登录的环境有效，如想永久保存，可以加入对应用户 的profile文件中：</p>

<p>[root@CentOS # umask 0022</p>

<p>umask参数中的数字范围为000-777。umask计算方法分为目录和文件两种情况。相应的 文件和目录默认创建权限确定步骤如下：</p>

<p>(1)    目录和文件的最大权限模式为777,即所有用户都具有读、写和执行权限。</p>

<p>(2)    得到当前环境umask的值，当前系统为0022。</p>

<p>(3)    对于目录来说。根据互补原则目录权限为755,而文件由于默认没有执行权限。最 大为666，则对应的文件权限为644。</p>

<p>【示例A-14】</p>

<p>#首先査看当前系统umask值，当前系统为022</p>

<p>[root@CentOS umask]# umask</p>

<p>0022</p>

<p>#分别创建文件和目录</p>

<p>[root@CentOS umask]# touch file [root@CentOS umask]# mkdir dir</p>

<p>#文件默认权限为666-022=644，目录默认权限为777_022=755</p>

<p>[root@CentOS umaslc]# Is -1</p>

<p>total 4</p>

<p>drwxr-xr~x. 2 root root 4096 Jun 4 01:22 dir ~rw—r~-r——.1 root root 0 Jun 4 01:22 file</p>

<p>A. 1.14文本操作awk和sed</p>

<p>awk和sed为Linux系统中强大的文本处理工具，其使用方法比较简洁，而且处理效率非 常高，本节主要介绍awk和sed命令的使用方法。</p>

<p>1 . awk命令</p>

<p>awk命令用于Linux下的文本处理。数据可以来自文件或标准输入，支持正则表达式等功 能，是Linux下强大的文本处理工具。</p>

<p>【示例A-15】</p>

<p>[root@CentOS 〜awk &lsquo;{print $0}* /etc/passwdlhead root❌0:0:root:/root:/bin/bash bin❌1:1:bin:/bin:/sbin/nologin daemon❌2:2:daemon:/sbin:/sbin/nologin</p>

<p>admix: 3:4 : a dm: /var/acim: /sbin/nologin lp❌4:7:lp:/var/spool/lpd:/sbin/nologin sync❌5:0:sync:/sbin:/bin/sync</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-328.jpg" alt="img" /></p>

<p>当指定awk时，首先从给定的文件中读取内容，然后针对文件中的每一行执行print命令， 并把输出发送至标准输出，如屏幕。在awk中，用于将代码分块。由于awk默认 的分隔符为空格等空白字符，上述示例中的功能为将文件中的每行打印出来。</p>

<p>2 . sed命令</p>

<p>在修改文件时，如果不断地重复某些编辑动作，则可用sed命令完成。sed命令为Linux 系统中将编辑工作自动化的编辑器，使用者无须直接编辑数据，是一种非交互式上下文编辑 器，•一般的Linux系统，本身即安装有sed工具。使用sed可以完成数据行的删除、更改、添 加、插入、合并或交换等操作。同awk类似，sed的命令可以通过命令行、管道或文件输入。 sed命令可以打印指定的行至标准输出或重定向至文件，打印指定的行可以使用“p”命</p>

<p>令，可以打印指定的某一行或某个范围的行。</p>

<p>【示例A-16]</p>

<p>[root@CentOS -] # head -3 /etc/passwd| sed -n 2p bin❌1:1:bin:/bin:/bin/bash</p>

<p>[root@CentOS # head -3 /etc/passwd | sed -n 2,3p bin❌1:1:bin:/bin:/bin/bash daemon❌2:2:Daemon:/sbin:/bin/bash</p>

<p>“2p”表示只打印第2行，而2,3p表示打印一个范围。</p>

    </div>

    
    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">iterateself</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">2018-06-27</span>
  </p>
  
  
</div>

    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/01-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/02-linux-%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/13-%E9%85%8D%E7%BD%AE-opennebula-%E4%BA%91%E5%B9%B3%E5%8F%B0/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">13 配置 OpenNebula 云平台</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/01-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/02-linux-%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/15-%E5%85%B6%E4%BB%96-%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86/">
            <span class="next-text nav-default">15 其他-目录管理</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="iteratelyd@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="http://github.com/iterateself" class="iconfont icon-github" title="github"></a>
      <a href="https://www.zhihu.com/people/thebegin/activities" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.douban.com/people/68028070/" class="iconfont icon-douban" title="douban"></a>
  <a href="http://iterate.site/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
    <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">iterateself</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/dist/even.min.js?v=3.2.0"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>








</body>
</html>
