<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>05 Linux 高级网络配置工具 - 迭代自己</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="iterateself" />
  <meta name="description" content="Linux高级网络配置工具 目前很多Linux在使用之前的arp、ifconfig和route命令。虽然这些工具能够工作，但它 们在Linux 2" />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.47.1" />


<link rel="canonical" href="http://iterate.site/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/01-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/02-linux-%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/03-%E8%BF%90%E7%BB%B4%E5%BF%85%E5%A4%87%E7%9A%84%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E6%8A%80%E8%83%BD/05-linux-%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%B7%A5%E5%85%B7/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="05 Linux 高级网络配置工具" />
<meta property="og:description" content="Linux高级网络配置工具 目前很多Linux在使用之前的arp、ifconfig和route命令。虽然这些工具能够工作，但它 们在Linux 2" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://iterate.site/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/01-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/02-linux-%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/03-%E8%BF%90%E7%BB%B4%E5%BF%85%E5%A4%87%E7%9A%84%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E6%8A%80%E8%83%BD/05-linux-%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%B7%A5%E5%85%B7/" /><meta property="article:published_time" content="2018-07-12T16:07:59&#43;00:00"/>
<meta property="article:modified_time" content="2018-07-12T16:07:59&#43;00:00"/>
<meta itemprop="name" content="05 Linux 高级网络配置工具">
<meta itemprop="description" content="Linux高级网络配置工具 目前很多Linux在使用之前的arp、ifconfig和route命令。虽然这些工具能够工作，但它 们在Linux 2">


<meta itemprop="datePublished" content="2018-07-12T16:07:59&#43;00:00" />
<meta itemprop="dateModified" content="2018-07-12T16:07:59&#43;00:00" />
<meta itemprop="wordCount" content="3870">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="05 Linux 高级网络配置工具"/>
<meta name="twitter:description" content="Linux高级网络配置工具 目前很多Linux在使用之前的arp、ifconfig和route命令。虽然这些工具能够工作，但它 们在Linux 2"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">iterate self</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">about</li>
      </a><a href="/catalog/">
        <li class="mobile-menu-item">目录</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">iterate self</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">about</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/catalog/">目录</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">05 Linux 高级网络配置工具</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-07-12 </span>
        
        <span class="more-meta"> 3870 words </span>
        <span class="more-meta"> 8 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content">
    
  </div>
</div>

    
    

    
    <div class="post-content">
      <p>Linux高级网络配置工具</p>

<p>目前很多Linux在使用之前的arp、ifconfig和route命令。虽然这些工具能够工作，但它 们在Linux 2.2和更高版本的内核上显得有一些落伍。无论对于Linux开发者还是Linux系统 管理员，网络程序调试时数据包的采集和分析是不可少的。tcpdump是Linux中强大的数据包 采集分析工具之一。本节主要介绍iproute2和tcpdump的相关知识。</p>

<p>3.5.1高级网络管理工具iproute2</p>

<p>相对于系统提供的arp、ifconfig和route等旧版本的命令，iproute2工具包提供了更丰富 的功能，除了提供了网络参数设置，路由设置，带宽控制等功能，最新的GRE隧道也可以通 过此工具进行配置。</p>

<p>现在大多数Linux发行版本都安装了 iproute2软件包,如没有安装可以使用yum工具进行 安装，应该注意的是yum工具需要联网才能使用。iproute2工具包中主要管理工具为ip命令。 下面将介绍iprOUte2工具包的安装与使用。安装过程如【示例3-21】所示。</p>

<p>【示例3-21】</p>

<p>[root@CentOS Packages]# yum install -y iproute #安装过程省略</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-62.jpg" alt="img" /></p>

<p>[root@CentOS Packages}# rpm -qa!grep iproute iproute-3.10.0-13.el7.x86_64 #检查安装情况</p>

<p>[root@CentOS Packages]# ip ~V</p>

<p>ip utility, iproute2-ssl30716</p>

<p>ip命令的语法如【示例3-22]所示。</p>

<p>【75例3-22】</p>

<p>[root@CentOS 叫# iP help</p>

<p>Usage: ip [ OPTIONS ] OBJECT { COMMAND I help }</p>

<p>ip [ -force 3 -batch filename</p>

<p>where OBJECT :- { link | addr I addrlabel I route I rule I neigh I ntable { tunnel J tuntap ( maddr | mroute I mrule | monitor J xfrm | netns 1 12tp J tcp一 metrics 丨 token }</p>

<p>OPTIONS := { -V[ersion] | -s[tatistics] I -d[etails] I -r[esolve] I -f[amily] { inet J inet6 1 ipx | dnet | bridge I link } |</p>

<p>-4 | -6 j -I j —D \ -B | -0 }</p>

<p>-1[oops] { maximum-addr-flush-attempts } I -o[neline] I ~ttimestamp] | ~b[atch] [filename] }</p>

<p>-rc[vbuf] [size]}</p>

<p>1.使用ip命令来查看网络配置</p>

<p>ip命令是iproute2软件的命令工具，可以替代ifconfig、route等命令，查看网络配置的用 法如【3-23】所示。</p>

<p>【示例3-23】</p>

<p>#显示当前网卡参数，同ipconfig [root@CentOS # ip addr list</p>

<p>1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.<sup>1</sup>&frasl;<sub>8</sub> scope host lo</p>

<p>valid一1ft forever preferred_lft forever inet6 ::<sup>1</sup>&frasl;<sub>128</sub> scope host</p>

<p>valid一1ft forever preferred 一1ft forever</p>

<p>2: enol6777736:〈BROADCAST,MULT工CAST,UP,LOWERJJP&gt; mtu 1500 qdisc pfifo一fast state UP qlen 1000</p>

<p>link/ether 00:0c:29:0b:07:76 brd</p>

<p>inet 192.168.128.<sup>133</sup>&frasl;<sub>24</sub> brd 192.168.128.255 scope global dynamic enol6777736 valid_lft 1149sec preferred 一1ft 1149sec</p>

<p>inet6 fe80::20c:29ff:feOb:<sup>776</sup>&frasl;<sub>64</sub> scope link valid_lft forever preferred 一Ift forever</p>

<p>3: eno33554984: <BROADCASTZMULTICAST,UP,LOWER_UP> mtQ 1500 qdisc pfifo_fast state UP qlen 1000</p>

<p>link/ether 00:0c:29:0b:07:80 brd</p>

<p>inet 192.168.146.<sup>150</sup>&frasl;<sub>24</sub> brd 192.168.146.255 scope global eno33554984 valid 一1ft forever preferred一1ft forever</p>

<p>inet6 fe80;:20c;29ff:feOb:<sup>780</sup>&frasl;<sub>64</sub> scope link valid一1ft forever preferred_lft forever</p>

<p>#添加新的网络 i址</p>

<p>[root^CentOS -]# ip addr add 192.168.128.<sup>140</sup>&frasl;<sub>24</sub> dev enol6777736 Croot@CentOS 〜]# ip addr list #部分结果省略</p>

<p>4: enol6777736: 〈BROADCAST,MULTICAST,UPrLOWERJJP〉 mtu 1500 qdisc pfifo__fast state UP qlen 1000</p>

<p>link/ether 00:0c:29:0b:07:76 brd&rsquo; ff:ff:ff:ff;ff:ff</p>

<p>inet 192.168.128.<sup>133</sup>&frasl;<sub>24</sub> brd 192.168.128.255 scope global dynamic enol6777736 valid_lft 1776sec preferred一Ift 1776sec</p>

<p>inet 192.168.128.<sup>140</sup>&frasl;<sub>24</sub> scope global secondary enol6777736 valid_lft forever preferred_lft forever</p>

<p>inet6 fe80::20c:29ff:fe0b:<sup>776</sup>&frasl;<sub>64</sub> scope link</p>

<p>valid_lft forever preferred_lft forever #删除网络地址&rdquo;</p>

<p>[root@CentOS # ip addr del 192.168,3.<sup>123</sup>&frasl;<sub>24</sub> dev ethO</p>

<p>上面的命令显示了机器上所有的地址，以及这些地址属于哪些网络接口。“inet”表示 Internet (IPv4)。ethO的IP地址与192.168.3.88/24相关联，“/24”指IP地址表示网络地址的位 数，“lo”则为本地回路信息。</p>

<p>2.显示路由信息</p>

<p>如需查看路由信息，可以使用“ip route list”命令，如【示例3-24】所示。</p>

<p>【示例3-24]</p>

<p>#査看路由情况</p>

<p>[root@CentOS 〜]眷 ip route list</p>

<p>default via 192.168.146.2 dev eno33554984 proto static metric 1024 192.168.128.0/24 dev enol6777736 proto kernel scope link src 192.168.128.133 192.168.146.0/24 dev eno3 3554 984 proto kernel scope link src 192.168.146.150 [root@CentOS 〜1# route -n</p>

<p>Kernel IP routing table</p>

<table>
<thead>
<tr>
<th>Destination</th>
<th>Gateway</th>
<th>Genmask</th>
<th>Flags</th>
<th>Metric</th>
<th>Ref</th>
<th>Use Iface</th>
</tr>
</thead>

<tbody>
<tr>
<td>0.0.0.0</td>
<td>192.168.146.2</td>
<td>0.0,0.0</td>
<td>UG</td>
<td>1024</td>
<td>0</td>
<td>0</td>
</tr>

<tr>
<td>eno33554984</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>192.168.128.0</td>
<td>0.0.0.0</td>
<td>255.255.255.0</td>
<td>U</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>

<tr>
<td>enol6777736</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>192.168,146.0</td>
<td>0.0.0，0</td>
<td>255.255.255.0</td>
<td>U</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>eno33554984 #添加路由</p>

<p>[rootSCentOS # ip route add 192.168.3.1 dev eno33554984</p>

<p>上述示例首先查看系统中当前的路由情况，其功能和route命令类似。 以上只是初步介绍了 iproute2的用法，更多信息请查看系统帮助。</p>

<p>3.5.2网络数据采集与分析工具tcpdump</p>

<p>tcpdump即dump traffic on a network,根据使用者的定义对网络上的数据包进行截获的包 分析工具。无论对于网络开发者还是系统管理员，数据包的获取与分析是最重要的技术之一。 对于系统管理员来说，在网络性能急剧下降的时候，可以通过tcpdump工具分析原因，找出造 成网络阻塞的来源。对于程序开发者来说，可以通过tcpdump工具来调试程序。tcpdump支持 针对网络层、协议、主机、网络或端口的过滤，并提供and, or, not等逻辑语句过滤不必要 的信息。</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-63.jpg" alt="img" /></p>

<p>Linux系统下tcpdump普通用户是不能正常执行，一般通过root用户执行。</p>

<p>tcpdump采用命令行方式，命令格式如下，参数说明如表3.12所示。</p>

<p>tcpdump [ -adefInNOpqStvx ]    [ -c 数量][-F 文件名]</p>

<p>[-i 网络接口] [ -r 文件名][-s snaplen j f -T类型][-w文件名][表达式]</p>

<p>表3.12 tcpdump命令参数含义说明</p>

<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>

<tbody>
<tr>
<td>-A</td>
<td>以ASCII码方式显示每一个数据包，在程序调试时可方便查看数据</td>
</tr>

<tr>
<td>-a</td>
<td>将网络地址和广播地址转变成名字</td>
</tr>

<tr>
<td>-C</td>
<td>tcpdump将在接收到指定数目的数据包后退出</td>
</tr>

<tr>
<td>-d</td>
<td>将匹配信息包的代码以人们能够理解的汇编格式给出</td>
</tr>

<tr>
<td>-dd</td>
<td>将匹配信息包的代码以C语言程序段的格式给出</td>
</tr>

<tr>
<td>-ddd</td>
<td>将匹配信息包的代码以十进制的形式给出</td>
</tr>

<tr>
<td>-e</td>
<td>在输出行打印出数据链路层的头部信息</td>
</tr>

<tr>
<td>-f</td>
<td>将外部的Internet地址以数字的形式打印出来</td>
</tr>

<tr>
<td>-F</td>
<td>使用文件作为过滤条件表达式的输入，此时命令行上的输入将被忽略</td>
</tr>

<tr>
<td>-i</td>
<td>指定监听的网络接口</td>
</tr>

<tr>
<td>-1</td>
<td>使标准输出变为缓冲行形式</td>
</tr>

<tr>
<td>-n</td>
<td>不把网络地址转换成名字</td>
</tr>

<tr>
<td>-N</td>
<td>不打印出host的域名部分</td>
</tr>

<tr>
<td>-q</td>
<td>打印很少的协议相关信息，从而输出行都比较简短</td>
</tr>

<tr>
<td>-r</td>
<td>从文件file中读取包数据</td>
</tr>

<tr>
<td>-s</td>
<td>设置tcpdump的数据包抓取长度，如果不设置默认为68字节</td>
</tr>

<tr>
<td>-t</td>
<td>在输出的每一行不打印时间戳</td>
</tr>

<tr>
<td>-tt</td>
<td>不对每行输出的时间进行格式处理</td>
</tr>

<tr>
<td>-ttt</td>
<td>tcpdump输出时，每两行打印之间会延迟一个时间段，以ms为单位</td>
</tr>

<tr>
<td>-tttt</td>
<td>在每行打印的时间戳之前添加日期的打印</td>
</tr>

<tr>
<td>-V</td>
<td>输出一个稍微详细的信息，例如在ip包中可以包括ttl和服务类型的信息</td>
</tr>

<tr>
<td>-w</td>
<td>输出详细的报文信息</td>
</tr>

<tr>
<td>-vw</td>
<td>产生比-W更详细的输出</td>
</tr>

<tr>
<td>-X</td>
<td>当分析和打印时，tcpdump会打印每个包的头部数据，同时会以十六进制打印出每个包的数据，但不包括连接层的头部</td>
</tr>

<tr>
<td>-XX</td>
<td>tcpdump会打印每个包的头部数据，同时会以十六进制打印出每个包的数据，其中包括数据链路 层的头部</td>
</tr>

<tr>
<td>-X</td>
<td>tcpdump会打印每个包的头部数据，同时会以十六进制和ASCII码形式打印出每个包的数据，但 不包括连接层的头部</td>
</tr>

<tr>
<td>-XX</td>
<td>tcpdump会打印每个包的头部数据，同时会以十六进制和ASCII码形式打印出每个包的数据，其 中包括数据链路层的头部</td>
</tr>
</tbody>
</table>

<p>首先确认本机tcpdump是否安装，如没有安装，可以使用【示例3-25】中的方法安装。</p>

<p>【示例3-25】</p>

<p># 安装 tcpdump</p>

<p>[rootQCentOS Packages]# yum install -y tcpdump #安装过程省略</p>

<p>tcpdump最简单的使用方法如【示例3-26】所示。 【示例3-26】</p>

<p>[root@CentOS Packages]# tcpdump -i any</p>

<p>tcpdump: verbose output suppressed, use -v or -vv for full protocol decode listening on any, link-type LINUX一SLL (Linux cooked), capture size 65535 bytes 15:47:05.143823 IP 192.168.146.150.ssh &gt; 192.168.146.1.52161: Flags {P.), seq</p>

<p>1017381117:1017381313, ack 1398930582, win 140, length 196</p>

<p>15:47:05.144050 IP 192.168.146.1.52161 &gt; 192.168.146.150.ssh: Flags [.], ack</p>

<p>196, win 16169, length 0</p>

<p>15:47:06.148824 IP 192.168.146.150.56971 &gt; ns.sc.cninfo.net.domain: 29605+PTR? 1.146.168.192.in-addr.arpa. (44)</p>

<p>15:47:06.158878 IP ns.sc.cninfo.net.domain &gt; 192.168.146.150.56971: 29605 NXDomain 0/0/0 (44)</p>

<p>#部分结果省略，按下Ctrl+C中止输出</p>

<p>以上示例演示了 tcpdump最简单的使用方式，如不跟任何参数，tcpdump会从系统接口列 表中搜寻编号最小的已配置好的接口，不包括loopback接口，—旦找到第1个符合条件的接 口，搜寻马上结束，并将获取的数据包打印出来。</p>

<p>tcpdump利用表达式作为过滤数据包的条件，表达式可以是正则表达式。如果数据包符合 表达式，则数据包被截获；如果没有给出任何条件，则接口上所有的信息包将会被截获。</p>

<p>表达式中一般有如下几种关键字：</p>

<p>(1)    第1种是关于类型的关键字，如host、net和port。例如host 192.168.16.150指明 192.168.16.150 为一台主机，而 net 192.168.16.150 则表示 192.168.16.150 为一个网络地址。如 果没有指定类型，默认的类型是host。</p>

<p>(2)    第2种是确定数据包传输方向的关键字，包含src、dst、dst or src和dst and src,这 些关键字指明了数据包的传输方向。例如src 192.168.16.150指明数据包中的源地址是 192.168.16.150,而dst 192.168.16.150则指明数据包中的目的地址是192.168.16.150。如果没有 指明方向关键字，则默认是src or dst关键字。</p>

<p>(3)    第3种是协议的关键字，如指明是TCP还是UDP协议。</p>

<p>除了这3种类型的关键字之外，还有3种逻辑运算，取非运算是“not”或“!”，与运算 是“and”或“&amp;&amp;”，或运算是“or”或“||”。通过这些关键字的组合可以实现复杂强大的 条件。接下来看一个综合【示例3-27】所示。</p>

<p>【示例3-27】</p>

<p>[root@CentOS ~3 # tcpdump ~i any tcp and dst host 192.168.19.101 and dst port 3306 -slOO -XX -n</p>

<p>tcpdump: verbose output suppressed, use -v or ~vv for full protocol decode listening on any, link-type LINUX_SLL (Linux cooked), capture size 100 bytes 16:08:05.539893 IP 192.168.19.101.49702 &gt; 192.168.19.101.mysql: Flags [P.seq</p>

<p>79:108, ack 158, win 1024, options [nop,nop,TS val 17107592 ecr 17107591], length 29</p>

<table>
<thead>
<tr>
<th>0x0000:</th>
<th>0000</th>
<th>0304</th>
<th>0006</th>
<th>0000</th>
<th>0000</th>
<th>0000</th>
<th>0000</th>
<th>0800</th>
<th>• • • • » ». • ■ •«.</th>
</tr>
</thead>

<tbody>
<tr>
<td>0x0010:</td>
<td>4508</td>
<td>0051</td>
<td>f fe8</td>
<td>4000</td>
<td>4006</td>
<td>929b</td>
<td>c0a8</td>
<td>1365</td>
<td>E. .Q.    @&hellip;&hellip;e</td>
</tr>

<tr>
<td>0x0020:</td>
<td>c0a8</td>
<td>1365</td>
<td>c226</td>
<td>Ocea</td>
<td>32aa</td>
<td>f5e0</td>
<td>c46e</td>
<td>c925</td>
<td>.• . 6« &amp; • • 2 • ■ • • n. %</td>
</tr>

<tr>
<td>0x0030:</td>
<td>8018</td>
<td>0400</td>
<td>a85e</td>
<td>0000</td>
<td>0101</td>
<td>080a</td>
<td>0105</td>
<td>0a88</td>
<td>• • • • • : • • • • •+ • • • • »</td>
</tr>

<tr>
<td>0x0040:</td>
<td>0105</td>
<td>0a87</td>
<td>1900</td>
<td>0000</td>
<td>0373</td>
<td>656c</td>
<td>6563</td>
<td>7420</td>
<td>&hellip;&hellip;&hellip;select.</td>
</tr>

<tr>
<td>0x0050:</td>
<td>2a20</td>
<td>6672</td>
<td>6f6d</td>
<td>206d</td>
<td>7973</td>
<td>7I6c</td>
<td></td>
<td>■ .*</td>
<td>.from.mysql</td>
</tr>
</tbody>
</table>

<p>以上tcpdump表示抓取发往本机3306端口的请求。“-i any”表示截获本机所有网络接口 的数据报“tcp”表示TCP协议“dst host”表示数据包地址为192.168.19.101, “dst port” 表示目的地址为3306,    “-XX”表示同时会以十六进制和ASCII码形式打印出每个包的数</p>

<p>搌” -si00&rdquo;表示设置tcpdump的数据包抓取长度为100个字节，如果不设置默认为68字节， “-n”表示不对地址如主机地址或端口号进行数字表示到名字表示的转换。输出部分 “16:08:05”表示时间，然后是发起请求的源IP端口和目的IP和端口，“Flags[P.]”是TCP 包中的标志信息：S是SYN标志，F表示FIN, P表示PUSH，R表示RST,    则表示没有</p>

<p>标记，详细说明可进一步参考TCP各种状态之间的转换规则=</p>

<p>70</p>

    </div>

    
    

    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/01-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/02-linux-%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/03-%E8%BF%90%E7%BB%B4%E5%BF%85%E5%A4%87%E7%9A%84%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E6%8A%80%E8%83%BD/07-linux-%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1dns/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">07 Linux 域名服务DNS</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/01-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/02-linux-%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/03-%E8%BF%90%E7%BB%B4%E5%BF%85%E5%A4%87%E7%9A%84%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E6%8A%80%E8%83%BD/06-%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEdhcp/">
            <span class="next-text nav-default">06 动态主机配置协议（DHCP）</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="iteratelyd@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="http://github.com/iterateself" class="iconfont icon-github" title="github"></a>
      <a href="https://www.zhihu.com/people/thebegin/activities" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.douban.com/people/68028070/" class="iconfont icon-douban" title="douban"></a>
  <a href="http://iterate.site/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
    <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">iterateself</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/dist/even.min.js?v=3.2.0"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>








</body>
</html>
