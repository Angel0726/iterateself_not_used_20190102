<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Python 基础 03 函数 - 迭代自己</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="iterateself" />
  <meta name="description" content="[TOC] 3.2 Functions (函数) Functions是python中很重要的概念。可以用def来定义： def my_function(x, y, z=1.5): if z &amp;gt; 1: return z * (x &#43; y) else: return z / (x &#43; y) 上面可以retu" />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.47.1" />


<link rel="canonical" href="http://iterate.site/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/01-%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/01-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/02-python/01%E5%9F%BA%E7%A1%80/python-%E5%9F%BA%E7%A1%80-03-%E5%87%BD%E6%95%B0/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="Python 基础 03 函数" />
<meta property="og:description" content="[TOC] 3.2 Functions (函数) Functions是python中很重要的概念。可以用def来定义： def my_function(x, y, z=1.5): if z &gt; 1: return z * (x &#43; y) else: return z / (x &#43; y) 上面可以retu" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://iterate.site/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/01-%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/01-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/02-python/01%E5%9F%BA%E7%A1%80/python-%E5%9F%BA%E7%A1%80-03-%E5%87%BD%E6%95%B0/" /><meta property="article:published_time" content="2018-06-15T20:53:41&#43;00:00"/>
<meta property="article:modified_time" content="2018-06-15T20:53:41&#43;00:00"/>
<meta itemprop="name" content="Python 基础 03 函数">
<meta itemprop="description" content="[TOC] 3.2 Functions (函数) Functions是python中很重要的概念。可以用def来定义： def my_function(x, y, z=1.5): if z &gt; 1: return z * (x &#43; y) else: return z / (x &#43; y) 上面可以retu">


<meta itemprop="datePublished" content="2018-06-15T20:53:41&#43;00:00" />
<meta itemprop="dateModified" content="2018-06-15T20:53:41&#43;00:00" />
<meta itemprop="wordCount" content="3757">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python 基础 03 函数"/>
<meta name="twitter:description" content="[TOC] 3.2 Functions (函数) Functions是python中很重要的概念。可以用def来定义： def my_function(x, y, z=1.5): if z &gt; 1: return z * (x &#43; y) else: return z / (x &#43; y) 上面可以retu"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">迭代自己</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a><a href="/catalog/">
        <li class="mobile-menu-item">目录</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">迭代自己</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/catalog/">目录</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Python 基础 03 函数</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-06-15 </span>
        
        <span class="more-meta"> 3757 words </span>
        <span class="more-meta"> 8 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li><a href="#3-2-functions-函数">3.2 Functions (函数)</a></li>
<li><a href="#1-namespaces-scope-and-local-functions-命名空间-作用范围-局部函数">1 Namespaces, Scope, and Local Functions（命名空间，作用范围，局部函数）</a></li>
<li><a href="#2-returning-multiple-values-返回多个值">2 Returning Multiple Values（返回多个值）</a></li>
<li><a href="#3-functions-are-objects-函数是对象">3 Functions Are Objects（函数是对象）</a></li>
<li><a href="#4-anonymous-lambda-functions-匿名函数-lambda函数">4 Anonymous (Lambda) Functions(匿名函数，lambda函数)</a></li>
<li><a href="#5-currying-partial-argument-application-柯里化-局部参数应用">5 Currying: Partial Argument Application(柯里化：局部参数应用)</a></li>
<li><a href="#6-generators-生成器">6 Generators(生成器)</a>
<ul>
<li><a href="#generator-expresssions-生成器表达式">Generator expresssions (生成器表达式)</a></li>
<li><a href="#itertools-module">itertools module</a></li>
</ul></li>
<li><a href="#7-errors-and-exception-handling-错误和异常处理">7 Errors and Exception Handling（错误和异常处理）</a>
<ul>
<li><a href="#exceptions-in-ipython-ipython中的异常">Exceptions in IPython (IPython中的异常)</a></li>
</ul></li>
<li><a href="#ref">REF</a></li>
</ul>
</nav>
  </div>
</div>

    
    

    
    <div class="post-content">
      

<p>[TOC]</p>

<h1 id="3-2-functions-函数">3.2 Functions (函数)</h1>

<p>Functions是python中很重要的概念。可以用def来定义：</p>

<pre><code class="language-python">def my_function(x, y, z=1.5):
    if z &gt; 1:
        return z * (x + y)
    else:
        return z / (x + y)
</code></pre>

<p>上面可以return多个结果，如果没有return语句的话，默认会返回None。==注意：每个函数都是必定有返回值的==</p>

<p>每个function有positional arguments（位置参数） and keyword arguments（关键字参数）。keyword argument通常用来指定默认的值或可选参数。在上面的函数里，x和y是位置参数，而z是一个关键字参数。我们可以通过下面的方式调用：</p>

<pre><code class="language-python">my_function(5, 6, z=0.7)
my_function(3.14, 7, 3.5)
my_function(10, 20)
</code></pre>

<p>输出：</p>

<pre><code>0.06363636363636363
35.49
45.0
</code></pre>

<p>一个需要强制遵守的规则是，函数的参数顺序为，位置参数在前，关键字参数在后。==这个要注意==而多个关键字参数的位置是可以自己指定的。比如下面的x，y，z都是关键字参数，调用函数的时候没有按顺序也可以：</p>

<pre><code class="language-python">my_function(x=5, y=6, z=7)
my_function(y=6, x=5, z=7)
</code></pre>

<h1 id="1-namespaces-scope-and-local-functions-命名空间-作用范围-局部函数">1 Namespaces, Scope, and Local Functions（命名空间，作用范围，局部函数）</h1>

<p>scope 分两种，global and local （全局和局部）。namespace 用来描述变量的作用范围。当调用一个函数的时候，会自动创建一个局部命名空间，用来存放函数的参数，一旦函数结束，局部命名空间会被自动废弃掉。考虑下面的例子：</p>

<pre><code class="language-python">def func():
    a = []
    for i in range(5):
        a.append(i)
</code></pre>

<p>当func()被调用，会创建一个空list a，然后5个元素赋给a。函数结束后，a也会被废弃。假设有下面的定义：</p>

<pre><code class="language-python">a = []
def func():
    for i in range(5):
        a.append(i)
</code></pre>

<p>给函数范围外的变量赋值是可行的，但是这些变量必须通过global关键字来声明：</p>

<pre><code class="language-python">a = None
b=None
def bind_a_variable():
    a = []
    global b
    b=[]
bind_a_variable()
print(a)
print(b)
</code></pre>

<p>输出：</p>

<pre><code>None
[]
</code></pre>

<p>下面这个关于list 的例子还是有点不清楚：==为什么 append 可以？而 直接赋值不行？可能是因为直接赋值指向的是一个新的地方，而这个地方只有在函数内部才有效，而 append 改动的是它原来的地方。==</p>

<pre><code class="language-python">a = []
b=[]
c=[]
c=[3]
def func():
    a.append(1)
    b=[2]
func()
print(a)
print(b)
print(c)
</code></pre>

<p>输出：</p>

<pre><code>[1]
[]
[3]
</code></pre>

<p>这里我们不推荐使用global关键字。因为这个全局变量通常用于存储系统状态（state in a system)，==什么意思？==如果你用了很多全局变量，或许你该考虑使用class。==什么意思？用class 统一存放变量吗？然后把这个class 设定为全局的？==</p>

<h1 id="2-returning-multiple-values-返回多个值">2 Returning Multiple Values（返回多个值）</h1>

<pre><code class="language-python">def f():
    a = 5
    b = 6
    c = 7
    return a, b, c
a, b, c = f()
</code></pre>

<p>原理：其实函数还是返回了一个object，即tuple，然后这个tuple被解压给了result variables. 比如：</p>

<pre><code>return_value = f()
</code></pre>

<p>这样的话，return_value就是一个 3-tuple。</p>

<h1 id="3-functions-are-objects-函数是对象">3 Functions Are Objects（函数是对象）</h1>

<p>因为函数是对象，所以很多构造能轻易表达出来。比如我们要对下面的string做一些数据清洗：</p>

<pre><code>states = [' Alabama ', 'Georgia!', 'Georgia', 'georgia', 
          'FlOrIda', 'south carolina##', 'West virginia?']
</code></pre>

<p>要想让这些string统一，我们要做几件事：去除空格，删去标点符号，标准化大小写。一种做法是利用内建函数和re模块（正则表达式）：</p>

<pre><code class="language-python">import re
def clean_string(strings):
    result = []
    for value in strings:
        value = value.strip()
        value = re.sub('[!#?]', '', value)
        value = value.title()
        result.append(value)
    return result
clean_string(states)
</code></pre>

<p>输出：</p>

<pre><code>['Alabama',
 'Georgia',
 'Georgia',
 'Georgia',
 'Florida',
 'South Carolina',
 'West Virginia']
</code></pre>

<p>还有一种做法，把一系列操作放在一个list里：==嗯，我以前看到过这个，有一些理解，现在再次看到才比较理解==</p>

<pre><code class="language-python">def remove_punctuation(value):
    return re.sub('[!#?]', '', value)
clean_ops = [str.strip, remove_punctuation, str.title]
def clean_strings(strings, ops):
    result = []
    for value in strings:
        for function in ops:
            value = function(value)
        result.append(value)
    return result
clean_strings(states, clean_ops)
</code></pre>

<p>输出：</p>

<pre><code>['Alabama',
 'Georgia',
 'Georgia',
 'Georgia',
 'Florida',
 'South Carolina',
 'West Virginia']
</code></pre>

<p>一个更函数化的方式能让你方便得在一个高等级上转变 string 。可以把函数当做其他函数的参数，比如用内建的 map 函数，这个 map 函数能把一个函数用于一个序列上：==对于map 函数一直理解的不够，主要是因为看到 map 函数经常会想到 hashmap==</p>

<pre><code class="language-python">for x in map(remove_punctuation, states):
    print(x)
</code></pre>

<p>输出：</p>

<pre><code> Alabama 
Georgia
Georgia
georgia
FlOrIda
south carolina
West virginia
</code></pre>

<h1 id="4-anonymous-lambda-functions-匿名函数-lambda函数">4 Anonymous (Lambda) Functions(匿名函数，lambda函数)</h1>

<p>这种函数只有一行，结果能返回值。下面两个函数是一样的效果：</p>

<pre><code class="language-python">def short_function(x):
    return x * 2
equiv_anon = lambda x: x * 2
</code></pre>

<p>之后我们只称其为lambda函数。这种函数在数据分析方面非常有用，就因为方便。比如下面的例子：</p>

<pre><code class="language-python">def apply_to_list(some_list, f):
    return [f(x) for x in some_list]
ints = [4, 0, 1, 5, 6]
apply_to_list(ints, lambda x: x * 2)
</code></pre>

<p>输出：</p>

<pre><code>[8, 0, 2, 10, 12]
</code></pre>

<p>假设你想按不同字母的数量给一组string排序：</p>

<pre><code class="language-python">strings = ['foo', 'card', 'bar', 'aaaa', 'abab']
strings.sort(key=lambda x: len(set(list(x))))#厉害，不同够得字母的数量，先转化成list 在转化成 set ，再求 len 。
strings
</code></pre>

<p>输出：</p>

<pre><code>['aaaa', 'foo', 'abab', 'bar', 'card']
</code></pre>

<h1 id="5-currying-partial-argument-application-柯里化-局部参数应用">5 Currying: Partial Argument Application(柯里化：局部参数应用)</h1>

<p>在计算机科学中，柯里化（Currying）是把接受多个参数的函数变换成接受一个单一参数(最初函数的第一个参数)的函数，并且返回接受余下的参数且返回结果的新函数的技术。</p>

<p><a href="http://www.vaikan.com/currying-partial-application/">函数加里化是一种实现多参数函数的方法。</a></p>

<p>简单的说，通过局部参数应用，在一个原有函数的基础上，构造一个新的函数。比如，我们想要一个加法的函数：</p>

<pre><code>def add_number(x, y):
    return x + y
</code></pre>

<p>通过上面这个函数，我们可以衍生出一个只需要一个参数的新方程，add_five，即把5加到参数上：==看到这个我就知道之前看到过，之前看的例子是把进制转换分别命名==</p>

<pre><code>add_five = lambda y: add_number(5, y)
</code></pre>

<p>其中第二个参数y叫做被柯里化了。这其实没什么特别的，我们做的其实就是用一个已有的函数定义了一个新函数。而内建的functools模块里的partial函数能简化这个操作：==嗯==</p>

<pre><code>from functools import partial
add_five = partial(add_number, 5)
</code></pre>

<h1 id="6-generators-生成器">6 Generators(生成器)</h1>

<p>这个东西在python里很重要，能用来迭代序列。比如，迭代一个字典：</p>

<pre><code>some_dict = {'a': 1, 'b': 2, 'c': 3}
for key in some_dict:
    print(key)
</code></pre>

<p>输出：</p>

<pre><code>a
b
c
</code></pre>

<p>当我们写 <code>for key in some_dict</code> 的时候，python解释器就新建了一个iterator：==是这样吗？==</p>

<pre><code>dict_iterator = iter(some_dict)
dict_iterator
</code></pre>

<p>输出：</p>

<pre><code>&lt;dict_keyiterator at 0x104c92ef8&gt;
</code></pre>

<p>一个生成器能产生 object 给 python 解释器，当遇到for loop这样的情景时。大部分方法，除了 list 之类的object，都能接受迭代器。比如内建的函数min, max, sum,或是类型构造器 list, tuple:
==嗯，我大概知道，生成器是一个用来提供元素的东西，而且每次返回一个==</p>

<pre><code>list(dict_iterator)
</code></pre>

<p>输出：</p>

<pre><code>['a', 'b', 'c']
</code></pre>

<p>生成器是用于构造迭代对象的简洁方式。不像其他函数一口气执行完，返回一个结果，生成器是多次返回一个序列，每请求一次，才会返回一个。用yield可以构建一个生成器：</p>

<pre><code>def squares(n=10):
    print('Generating squares from 1 to {0}'.format(n**2))
    for i in range(1, n+1):
        yield i ** 2
</code></pre>

<p>当你实际调用一个生成器的时候，不会有代码立刻执行：</p>

<pre><code>gen = squares()
gen
</code></pre>

<p>输出：</p>

<pre><code>&lt;generator object squares at 0x104c95bf8&gt;
</code></pre>

<p>知道我们发出请求，生成器才会执行代码：==关于这个发出请求，什么是发出请求？这个地方的 for 怎么发出请求了？==</p>

<pre><code>for x in gen:
    print(x, end=' ')
</code></pre>

<p>输出：</p>

<pre><code>Generating squares from 1 to 100
1 4 9 16 25 36 49 64 81 100 
</code></pre>

<h2 id="generator-expresssions-生成器表达式">Generator expresssions (生成器表达式)</h2>

<p>另一个构造生成器的方式是利用生成器表达式。写法就像列表表达式一样，只不过使用括号：==这里注意一下与列表推导式的区别==</p>

<pre><code class="language-python">a = (x ** 2 for x in range(10))# 这个是生成器
b=[x**2 for x in range(10)]# 后面这两个是列表推导式
c={x**2 for x in range(10)}

print(a)
print(b)
print(c)
</code></pre>

<p>输出：</p>

<pre><code>&lt;generator object &lt;genexpr&gt; at 0x0000019B03DF5BF8&gt;
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
{0, 1, 64, 4, 36, 9, 16, 49, 81, 25}
</code></pre>

<p>上面的代码和下面冗长的代码是等效的：</p>

<pre><code class="language-python">def _make_gen():
    for x in range(100):
        yield x ** 2
gen = _make_gen()
</code></pre>

<p>生成器表达式能作为函数的参数，而列表表达式不能作为函数的参数：==嗯==</p>

<pre><code class="language-python">sum( x ** 2 for x in range(100))
</code></pre>

<p>输出：</p>

<pre><code>328350
</code></pre>

<pre><code class="language-python">dict((i, i**2) for i in range(5))
</code></pre>

<p>输出：</p>

<pre><code>{0: 0, 1: 1, 2: 4, 3: 9, 4: 16}
</code></pre>

<h2 id="itertools-module">itertools module</h2>

<p>itertools模块有很多常用算法的生成器。比如 groupby 能取任意序列当做函数：==没明白？==</p>

<pre><code class="language-python">import itertools 
first_letter = lambda x: x[0]
names = ['Alan', 'Adam', 'Wes', 'Will', 'Albert', 'Steven']
for letter, group in itertools.groupby(names, first_letter):
    print(letter, list(group)) # names is a generator
</code></pre>

<p>输出：</p>

<pre><code>A ['Alan', 'Adam']
W ['Wes', 'Will']
A ['Albert']
S ['Steven']
</code></pre>

<p>这个地方的groupby 说明一下：The operation of groupby() is similar to the uniq filter in Unix. It generates a break or new group every time the value of the key function changes (which is why it is usually necessary to have sorted the data using the same key function).</p>

<p>就是说：这里的 groupby 可以理解为根据 key 把相邻的重复元素挑出来放在一起成为一个小组，然后对这一小组的东西返回一个 迭代器，这样每个小组都有每个小组的迭代器，上面的函数中的 group 就是一个迭代器。(<a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/00143200162233153835cfdd1a541a18ddc15059e3ddeec000">参考廖雪峰groupby</a>)</p>

<p>所以如果想要让 Albert 与其他两个A开头的名字分到一组的话，可以先对 names 排序，让三个A开头的名字相邻，然后再用groupby：</p>

<pre><code class="language-python">first_letter = lambda x: x[0]
names = ['Alan', 'Adam', 'Wes', 'Will', 'Albert', 'Steven']
names = sorted(names, key=first_letter)# 先进行排序
for letter, group in itertools.groupby(names, first_letter):#然后再按照对应的keyfunc 进行groupby
    print(letter, list(group))# 这个地方的 group 其实是一个迭代器，也就是说，对于每个 k 都有一个迭代器。
</code></pre>

<p>输出：</p>

<pre><code>A ['Alan', 'Adam', 'Albert']
S ['Steven']
W ['Wes', 'Will']
</code></pre>

<p>一些迭代工具函数：<img src="http://pacdb2bfr.bkt.clouddn.com/blog/image/180615/g24jae5ALg.png?imageslim" alt="mark" /></p>

<h1 id="7-errors-and-exception-handling-错误和异常处理">7 Errors and Exception Handling（错误和异常处理）</h1>

<p>在数据分析应用中，许多函数只能用于特定的输入。比如float能把string变为浮点数，但如果有不正确的输入的话会报错：</p>

<pre><code class="language-python">float('1.2345')
float('something')
</code></pre>

<p>输出：</p>

<pre><code>1.2345
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
&lt;ipython-input-47-439904410854&gt; in &lt;module&gt;()
----&gt; 1 float('something')

ValueError: could not convert string to float: 'something'
</code></pre>

<p>假设我们想要这个 float 失败的优雅一些，返回输入的参数。我们可以用try/except：</p>

<p>这个except的部分只有当 float(x) 引发异常的时候才会执行：</p>

<pre><code class="language-python">def attempt_float(x):
    try:
        return float(x)
    except:
        return x
attempt_float('1.2345')
attempt_float('something')
</code></pre>

<p>输出：</p>

<pre><code>1.2345
'something'
</code></pre>

<p>当然，float也可能引发除了 ValueError 之外的异常：</p>

<pre><code>float((1, 2))
</code></pre>

<p>输出：</p>

<pre><code>---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-53-842079ebb635&gt; in &lt;module&gt;()
----&gt; 1 float((1, 2))

TypeError: float() argument must be a string or a number, not 'tuple'
</code></pre>

<p>你可能只想控制ValueError，因为如果是TypeError的话，错误提示对你debug是有帮助的：</p>

<pre><code class="language-python">def attempt_float(x):
    try:
        return float(x)
    except ValueError:
        return x
attempt_float((1, 2))
</code></pre>

<p>输出：</p>

<pre><code>---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-55-9bdfd730cead&gt; in &lt;module&gt;()
----&gt; 1 attempt_float((1, 2))

&lt;ipython-input-54-84efde0a7059&gt; in attempt_float(x)
      1 def attempt_float(x):
      2     try:
----&gt; 3         return float(x)
      4     except ValueError:
      5         return x

TypeError: float() argument must be a string or a number, not 'tuple'
</code></pre>

<p>当然，你也可以捕捉多个不同的异常：</p>

<pre><code class="language-python">def attempt_float(x):
    try:
        return float(x)
    except (TypeError, ValueError):
        return x
</code></pre>

<p>在某些情况下，你不想抑制任何异常，但你想希望执行某些代码，不论 try 里的代码成功执行与否。这样的话，需要用的 finally :</p>

<pre><code class="language-python">f = open(path, 'w')
try:
    write_to_file(y)
finally:
    f.close()
</code></pre>

<p>这样的处理会始终会让 f 关闭。同样的，你可以在try里的代码成功执行后，让某些代码执行：</p>

<pre><code class="language-python">f = open(path, 'w')
try:
    write_to_file(f)
except:
    print('Failed')
else:
    print('Succeeded')
finally:
    f.close()
</code></pre>

<h2 id="exceptions-in-ipython-ipython中的异常">Exceptions in IPython (IPython中的异常)</h2>

<p>当使用%run执行代码片段，引发异常后，IPython中默认打印出所有的调用信息（traceback）</p>

<pre><code class="language-python">%run example/ipython_bug.py
ERROR:root:File `'example/ipython_bug.py'` not found.
</code></pre>

<h1 id="ref">REF</h1>

<ul>
<li><a href="http://www.vaikan.com/currying-partial-application/">函数加里化(Currying)和偏函数应用(Partial Application)的比较</a></li>
</ul>

    </div>

    
    

    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/01-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/02-linux-%E7%8E%AF%E5%A2%83/vim/vim/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Vim</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/01-%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/01-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/02-python/01%E5%9F%BA%E7%A1%80/python-%E5%9F%BA%E7%A1%80-02-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E5%BA%8F%E5%88%97/">
            <span class="next-text nav-default">Python 基础 02 数据结构与序列</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="iteratelyd@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="http://github.com/iterateself" class="iconfont icon-github" title="github"></a>
      <a href="https://www.zhihu.com/people/thebegin/activities" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.douban.com/people/68028070/" class="iconfont icon-douban" title="douban"></a>
  <a href="http://iterate.site/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
    <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">iterateself</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/dist/even.min.js?v=3.2.0"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>








</body>
</html>
