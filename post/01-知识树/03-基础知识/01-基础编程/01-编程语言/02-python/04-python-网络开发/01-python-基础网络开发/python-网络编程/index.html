<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Python 网络编程 - 迭代自己</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="iterateself" />
  <meta name="description" content="需要补充的 Python 网络编程 Python 网络编程 Python 提供了两个级别访问的网络服务。： 低级别的网络服务支持基本的 Socket，它提供了标准的 BSD Sockets API，可以访问底" />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.47.1" />


<link rel="canonical" href="http://iterate.site/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/01-%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/01-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/02-python/04-python-%E7%BD%91%E7%BB%9C%E5%BC%80%E5%8F%91/01-python-%E5%9F%BA%E7%A1%80%E7%BD%91%E7%BB%9C%E5%BC%80%E5%8F%91/python-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="Python 网络编程" />
<meta property="og:description" content="需要补充的 Python 网络编程 Python 网络编程 Python 提供了两个级别访问的网络服务。： 低级别的网络服务支持基本的 Socket，它提供了标准的 BSD Sockets API，可以访问底" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://iterate.site/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/01-%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/01-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/02-python/04-python-%E7%BD%91%E7%BB%9C%E5%BC%80%E5%8F%91/01-python-%E5%9F%BA%E7%A1%80%E7%BD%91%E7%BB%9C%E5%BC%80%E5%8F%91/python-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" /><meta property="article:published_time" content="2018-06-11T08:14:43&#43;00:00"/>
<meta property="article:modified_time" content="2018-06-11T08:14:43&#43;00:00"/>
<meta itemprop="name" content="Python 网络编程">
<meta itemprop="description" content="需要补充的 Python 网络编程 Python 网络编程 Python 提供了两个级别访问的网络服务。： 低级别的网络服务支持基本的 Socket，它提供了标准的 BSD Sockets API，可以访问底">


<meta itemprop="datePublished" content="2018-06-11T08:14:43&#43;00:00" />
<meta itemprop="dateModified" content="2018-06-11T08:14:43&#43;00:00" />
<meta itemprop="wordCount" content="2016">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python 网络编程"/>
<meta name="twitter:description" content="需要补充的 Python 网络编程 Python 网络编程 Python 提供了两个级别访问的网络服务。： 低级别的网络服务支持基本的 Socket，它提供了标准的 BSD Sockets API，可以访问底"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">迭代自己</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">最新</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a><a href="/catalog/">
        <li class="mobile-menu-item">完整目录</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">迭代自己</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">最新</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/catalog/">完整目录</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Python 网络编程</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-06-11 </span>
        
        <span class="more-meta"> 2016 words </span>
        <span class="more-meta"> 5 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li><a href="#需要补充的">需要补充的</a></li>
<li><a href="#python-网络编程">Python 网络编程</a>
<ul>
<li><a href="#python-网络编程-1">Python 网络编程</a></li>
<li><a href="#什么是-socket">什么是 Socket?</a></li>
<li><a href="#socket-函数">socket()函数</a>
<ul>
<li><a href="#参数">参数</a></li>
<li><a href="#socket-对象-内建-方法">Socket 对象(内建)方法</a></li>
</ul></li>
<li><a href="#简单实例">简单实例</a>
<ul>
<li><a href="#服务端">服务端</a></li>
<li><a href="#客户端">客户端</a></li>
</ul></li>
<li><a href="#python-internet-模块">Python Internet 模块</a></li>
</ul></li>
<li><a href="#相关资料">相关资料</a></li>
</ul>
</nav>
  </div>
</div>

    
    

    
    <div class="post-content">
      

<h1 id="需要补充的">需要补充的</h1>

<h1 id="python-网络编程">Python 网络编程</h1>

<h2 id="python-网络编程-1">Python 网络编程</h2>

<p>Python 提供了两个级别访问的网络服务。：</p>

<ul>
<li>低级别的网络服务支持基本的 Socket，它提供了标准的 BSD Sockets API，可以访问底层操作系统Socket接口的全部方法。</li>
<li>高级别的网络服务模块 SocketServer， 它提供了服务器中心类，可以简化网络服务器的开发。</li>
</ul>

<h2 id="什么是-socket">什么是 Socket?</h2>

<p>Socket又称&rdquo;套接字&rdquo;，应用程序通常通过&rdquo;套接字&rdquo;向网络发出请求或者应答网络请求，使主机间或者一台计算机上的进程间可以通讯。</p>

<hr />

<h2 id="socket-函数">socket()函数</h2>

<p>Python 中，我们用 socket（）函数来创建套接字，语法格式如下：</p>

<pre><code>socket.socket([family[, type[, proto]]])
</code></pre>

<h3 id="参数">参数</h3>

<ul>
<li><p>family: 套接字家族可以使AF_UNIX或者AF_INET</p></li>

<li><p>type: 套接字类型可以根据是面向连接的还是非连接分为<code>SOCK_STREAM</code>或<code>SOCK_DGRAM</code></p></li>

<li><p>protocol: 一般不填默认为0.</p></li>
</ul>

<h3 id="socket-对象-内建-方法">Socket 对象(内建)方法</h3>

<table class="reference" >

<tr >
函数
描述
</tr>

<tbody >
<tr >

<td colspan="2" >服务器端套接字
</td>
</tr>
<tr >

<td >s.bind()
</td>

<td >绑定地址（host,port）到套接字， 在AF_INET下,以元组（host,port）的形式表示地址。
</td>
</tr>
<tr >

<td >s.listen()
</td>

<td >开始TCP监听。backlog指定在拒绝连接之前，操作系统可以挂起的最大连接数量。该值至少为1，大部分应用程序设为5就可以了。
</td>
</tr>
<tr >

<td >s.accept()
</td>

<td >被动接受TCP客户端连接,(阻塞式)等待连接的到来
</td>
</tr>
<tr >

<td colspan="2" >客户端套接字
</td>
</tr>
<tr >

<td >s.connect()
</td>

<td >主动初始化TCP服务器连接，。一般address的格式为元组（hostname,port），如果连接出错，返回socket.error错误。
</td>
</tr>
<tr >

<td >s.connect_ex()
</td>

<td >connect()函数的扩展版本,出错时返回出错码,而不是抛出异常
</td>
</tr>
<tr >

<td colspan="2" >公共用途的套接字函数
</td>
</tr>
<tr >

<td >s.recv()
</td>

<td >接收TCP数据，数据以字符串形式返回，bufsize指定要接收的最大数据量。flag提供有关消息的其他信息，通常可以忽略。
</td>
</tr>
<tr >

<td >s.send()
</td>

<td >发送TCP数据，将string中的数据发送到连接的套接字。返回值是要发送的字节数量，该数量可能小于string的字节大小。
</td>
</tr>
<tr >

<td >s.sendall()
</td>

<td >完整发送TCP数据，完整发送TCP数据。将string中的数据发送到连接的套接字，但在返回之前会尝试发送所有数据。成功返回None，失败则抛出异常。
</td>
</tr>
<tr >

<td >s.recvform()
</td>

<td >接收UDP数据，与recv()类似，但返回值是（data,address）。其中data是包含接收数据的字符串，address是发送数据的套接字地址。
</td>
</tr>
<tr >

<td >s.sendto()
</td>

<td >发送UDP数据，将数据发送到套接字，address是形式为（ipaddr，port）的元组，指定远程地址。返回值是发送的字节数。
</td>
</tr>
<tr >

<td >s.close()
</td>

<td >关闭套接字
</td>
</tr>
<tr >

<td >s.getpeername()
</td>

<td >返回连接套接字的远程地址。返回值通常是元组（ipaddr,port）。
</td>
</tr>
<tr >

<td >s.getsockname()
</td>

<td >返回套接字自己的地址。通常是一个元组(ipaddr,port)
</td>
</tr>
<tr >

<td >s.setsockopt(level,optname,value)
</td>

<td >设置给定套接字选项的值。
</td>
</tr>
<tr >

<td >s.getsockopt(level,optname[.buflen])
</td>

<td >返回套接字选项的值。
</td>
</tr>
<tr >

<td >s.settimeout(timeout)
</td>

<td >设置套接字操作的超时期，timeout是一个浮点数，单位是秒。值为None表示没有超时期。一般，超时期应该在刚创建套接字时设置，因为它们可能用于连接的操作（如connect()）
</td>
</tr>
<tr >

<td >s.gettimeout()
</td>

<td >返回当前超时期的值，单位是秒，如果没有设置超时期，则返回None。
</td>
</tr>
<tr >

<td >s.fileno()
</td>

<td >返回套接字的文件描述符。
</td>
</tr>
<tr >

<td >s.setblocking(flag)
</td>

<td >如果flag为0，则将套接字设为非阻塞模式，否则将套接字设为阻塞模式（默认值）。非阻塞模式下，如果调用recv()没有发现任何数据，或send()调用无法立即发送数据，那么将引起socket.error异常。
</td>
</tr>
<tr >

<td >s.makefile()
</td>

<td >创建一个与该套接字相关连的文件
</td>
</tr>
</tbody>
</table>

<hr />

<h2 id="简单实例">简单实例</h2>

<h3 id="服务端">服务端</h3>

<p>我们使用 socket 模块的 <strong>socket</strong> 函数来创建一个 socket 对象。socket 对象可以通过调用其他函数来设置一个 socket 服务。</p>

<p>现在我们可以通过调用 <strong>bind(hostname, port)</strong> 函数来指定服务的 _port(端口)_。</p>

<p>接着，我们调用 socket 对象的 _accept_ 方法。该方法等待客户端的连接，并返回 _connection_ 对象，表示已连接到客户端。</p>

<p>完整代码如下：</p>

<pre><code>#!/usr/bin/python
# -*- coding: UTF-8 -*-
# 文件名：server.py

import socket               # 导入 socket 模块

s = socket.socket()         # 创建 socket 对象
host = socket.gethostname() # 获取本地主机名
port = 12345                # 设置端口
s.bind((host, port))        # 绑定端口

s.listen(5)                 # 等待客户端连接
while True:
    c, addr = s.accept()     # 建立客户端连接。
    print '连接地址：', addr
    c.send('欢迎访问W3Cschool教程！')
    c.close()                # 关闭连接
</code></pre>

<h3 id="客户端">客户端</h3>

<p>接下来我们写一个简单的客户端实例连接到以上创建的服务。端口号为 12345。</p>

<p><strong>socket.connect(hosname, port )</strong> 方法打开一个 TCP 连接到主机为 _hostname_ 端口为 _port_ 的服务商。连接后我们就可以从服务端后期数据，记住，操作完成后需要关闭连接。</p>

<p>完整代码如下：</p>

<pre><code>#!/usr/bin/python
# -*- coding: UTF-8 -*-
# 文件名：client.py

import socket               # 导入 socket 模块

s = socket.socket()         # 创建 socket 对象
host = socket.gethostname() # 获取本地主机名
port = 12345                # 设置端口好

s.connect((host, port))
print s.recv(1024)
s.close()
</code></pre>

<p>现在我们打开连个终端，第一个终端执行 server.py 文件：</p>

<pre><code>$ python server.py
</code></pre>

<p>第二个终端执行 client.py 文件：</p>

<pre><code>$ python client.py
欢迎访问W3Cschool教程！
</code></pre>

<p>这是我们再打开第一个终端，就会看到有以下信息输出：</p>

<pre><code>连接地址： ('192.168.0.118', 62461)
</code></pre>

<hr />

<h2 id="python-internet-模块">Python Internet 模块</h2>

<p>以下列出了 Python 网络编程的一些重要模块：
<table class="reference" >
<tbody >
<tr >
协议
功能用处
端口号
Python 模块
</tr>
<tr ></p>

<p><td >HTTP
</td></p>

<p><td >网页访问
</td></p>

<p><td >80
</td></p>

<p><td >httplib, urllib, xmlrpclib
</td>
</tr>
<tr ></p>

<p><td >NNTP
</td></p>

<p><td >阅读和张贴新闻文章，俗称为&rdquo;帖子&rdquo;
</td></p>

<p><td >119
</td></p>

<p><td >nntplib
</td>
</tr>
<tr ></p>

<p><td >FTP
</td></p>

<p><td >文件传输
</td></p>

<p><td >20
</td></p>

<p><td >ftplib, urllib
</td>
</tr>
<tr ></p>

<p><td >SMTP
</td></p>

<p><td >发送邮件
</td></p>

<p><td >25
</td></p>

<p><td >smtplib
</td>
</tr>
<tr ></p>

<p><td >POP3
</td></p>

<p><td >接收邮件
</td></p>

<p><td >110
</td></p>

<p><td >poplib
</td>
</tr>
<tr ></p>

<p><td >IMAP4
</td></p>

<p><td >获取邮件
</td></p>

<p><td >143
</td></p>

<p><td >imaplib
</td>
</tr>
<tr ></p>

<p><td >Telnet
</td></p>

<p><td >命令行
</td></p>

<p><td >23
</td></p>

<p><td >telnetlib
</td>
</tr>
<tr ></p>

<p><td >Gopher
</td></p>

<p><td >信息查找
</td></p>

<p><td >70
</td></p>

<p><td >gopherlib, urllib
</td>
</tr>
</tbody>
</table>
更多内容可以参阅官网的 <a href="https://docs.python.org/2/library/socket.html">Python Socket Library and Modules</a>。</p>

<h1 id="相关资料">相关资料</h1>

<ol>
<li><a href="https://www.w3cschool.cn/python/">python基础教程 w3cschool</a></li>
<li><a href="http://www.runoob.com/python3/python3-tutorial.html">Python 3 教程 菜鸟教程</a></li>
</ol>

    </div>

    
    

    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/01-%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/01-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/02-python/02-python-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/09-python-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/python-%E6%A8%A1%E5%9D%97/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Python 模块</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/01-%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/01-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/02-python/02-python-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-python-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/python-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">
            <span class="next-text nav-default">Python 面向对象</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="iteratelyd@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="http://github.com/iterateself" class="iconfont icon-github" title="github"></a>
      <a href="https://www.zhihu.com/people/thebegin/activities" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.douban.com/people/68028070/" class="iconfont icon-douban" title="douban"></a>
  <a href="http://iterate.site/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
    <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">iterateself</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/dist/even.min.js?v=3.2.0"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>








</body>
</html>
