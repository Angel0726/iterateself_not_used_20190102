<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>13 配置 OpenNebula 云平台 - 迭代自己</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="iterateself" />
  <meta name="description" content="◄配置OpenNebula云罕台► ◄配置OpenNebula云罕台► OpenNebula是一个非常成熟的云平台，十分简单但功能却又十分丰富。" />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.47.1" />


<link rel="canonical" href="http://iterate.site/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/02-%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/01-%E5%90%8E%E7%AB%AF%E7%8E%AF%E5%A2%83/01-linux-%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/13-%E9%85%8D%E7%BD%AE-opennebula-%E4%BA%91%E5%B9%B3%E5%8F%B0/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="13 配置 OpenNebula 云平台" />
<meta property="og:description" content="◄配置OpenNebula云罕台► ◄配置OpenNebula云罕台► OpenNebula是一个非常成熟的云平台，十分简单但功能却又十分丰富。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://iterate.site/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/02-%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/01-%E5%90%8E%E7%AB%AF%E7%8E%AF%E5%A2%83/01-linux-%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/13-%E9%85%8D%E7%BD%AE-opennebula-%E4%BA%91%E5%B9%B3%E5%8F%B0/" /><meta property="article:published_time" content="2018-06-27T07:04:55&#43;00:00"/>
<meta property="article:modified_time" content="2018-06-27T07:04:55&#43;00:00"/>
<meta itemprop="name" content="13 配置 OpenNebula 云平台">
<meta itemprop="description" content="◄配置OpenNebula云罕台► ◄配置OpenNebula云罕台► OpenNebula是一个非常成熟的云平台，十分简单但功能却又十分丰富。">


<meta itemprop="datePublished" content="2018-06-27T07:04:55&#43;00:00" />
<meta itemprop="dateModified" content="2018-06-27T07:04:55&#43;00:00" />
<meta itemprop="wordCount" content="12017">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="13 配置 OpenNebula 云平台"/>
<meta name="twitter:description" content="◄配置OpenNebula云罕台► ◄配置OpenNebula云罕台► OpenNebula是一个非常成熟的云平台，十分简单但功能却又十分丰富。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">迭代自己</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">最新</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a><a href="/catalog/">
        <li class="mobile-menu-item">完整目录</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">迭代自己</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">最新</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/catalog/">完整目录</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">13 配置 OpenNebula 云平台</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-06-27 </span>
        
        <span class="more-meta"> 12017 words </span>
        <span class="more-meta"> 24 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content">
    
  </div>
</div>

    
    

    
    <div class="post-content">
      <nav>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#配置opennebula云罕台">◄配置OpenNebula云罕台►</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>

<h6 id="配置opennebula云罕台">◄配置OpenNebula云罕台►</h6>

<p>OpenNebula是一个非常成熟的云平台，十分简单但功能却又十分丰富。它提供了十分灵 活的解决方案，让用户能建立并管理企业云和虚拟的数据中心。OpenNebula的设计目标是简 单、轻便、灵活且功能强大，也正因为如此其赢得了不少用户。本章将简要介绍OpenNebula 云平台及其使用方法。</p>

<p>本章主要涉及的知识点有：</p>

<p>•    云简介</p>

<p>•    OpenNebula 概述</p>

<p>•    OpenNebula安装与管理</p>

<p>13.1 OpenNebula 概述</p>

<p>OpenNebula是云计算软件中的代表之一，其轻便、简单、灵活的特点为其贏得了不少客 户，但在国内仍少有人使用。本节将简要介绍云计算与OpenNebula等知识。</p>

<p>13.1.1云计算概述</p>

<p>云计算是近年来兴起的新技术之一，关于云计算还没有一个准确的定义，有许多种关于云 计算的解释。但广为人们接受的是美国国家标准与技术研究院（National Institute of Standards and Technology, NIST）的定义：云计算是一种按使用量付费的模式，这种模式提供便捷、可 用和按需求的网络访问，进入可配置的计算资源共享池（资源包括网络、服务器、存储应用软 件及服务），这些资源能够被快速提供，只需投入很少的管理工作，或与服务供应商进行很少 的交互。.</p>

<p>美国国家标准与技术研究院关于云计算定义的翻译来源于网络，译者不详。</p>

<p>云计算有许多种应用实例和模型本书并不涉及,本书中介绍的云计算模型均是以虚拟化为 核心、以计算机网络技术为基础的计算模式。此类模式为企业提供了更加经济、便捷的管理模 式，广泛应用于各种大中小型企业中。</p>

<p>云计算是将原来较为分散的计算、存储、服务器等资源，通过计算机网络和云计算软件有 效地整合起来，从而形成一个便于管理、分配的资源库。当新客户到来或有新的需求时，管理 员仅需要从资源库中选择合乎要求的各类资源，并进行重新组装即可供新客户使用。同时在原 有基础上还实现了资源细化及按需配置。</p>

<p>简单来说就是将原有的服务器计算资源、网络（通过Vian的形式）、存储等资源通过虚拟 化的方式，重新组装成新的虚拟计算机，从而实现对资源的精确分配。由此可以说云计算是传 统的分布式计算、网络存储、并行计算、虚拟化、负载均衡、效用计算等技术与网络技术互相 融合的产物。</p>

<p>13.1.2 OpenNebula 概述</p>

<p>OpenNebula是专门为云计算打造的开源系统，用户可以使用Xen、KVM甚至是VMware 等虚拟化软件一起打造企业云。利用OpenNebula可以轻松地构建私有云、混合云及公开云， OpenNebula提供的接口如图13.1所示。</p>

<p>图13.1 OpenNebula提供的接口</p>

<p>OpenNebula提供的接口比较丰富，如管理员提供了包括类似于Unix命令行的工具集CLI 及功能强大的GUI界面；可扩展的底层接口提供了 XML-RPC、Ruby、Java等AH供用户整 合使用等。</p>

<p>OpenNebula还提供了许多资源管理和预配置目录，使用这些目录中的资源，可以快速、 安全地构建富有弹性的云平台，资源目录如图13.2所示。</p>

<p>NETWORK CATALOG</p>

<p>•    Private Dev Net</p>

<p>•    Public Net</p>

<p>•    HPC InfiniBand</p>

<p>•    Private production</p>

<p>TEMPLATE CATALOG</p>

<p>•    Web Server Front-end</p>

<p>•    Database component</p>

<p>•    Web server workar</p>

<p>•    Load balancer</p>

<p>图13.2 OpenNebula提供的资源目录</p>

<p>映像目录主要包含的是磁盘映像；网络目录可以使用有组织的网络，也可以使用虚拟网络 或混合网络，既能使用IPv4也能使用IPv6； VM模板目录同VMware虚拟化中的模板相似， 可以被实例化为虚拟机；除此之外还有虚拟资源控制及监测（主要用于虚拟机迁移、停止、恢 复等）等。</p>

<p>OpenNebula的工作机制相对比较简单，其使用共享的存储设备来为虚拟机提供各种存储 服务，以便于所有虚拟机都能访问到相同的资源。同时OpenNebula还使用SSH作为传输方式, 将虚拟化管理命令传输至各节点，这样做的好处是无须安装额外的服务或软件，降低f软件的 复杂性。</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-302.jpg" alt="img" /></p>

<p>本小节中仅介绍了与配置OpenNebula相关的内容，其他相关内容可通过查看其官方网站 上的说明了解，此处不再赘述。</p>

<p>13.2 OpenNebula 安装</p>

<p>OpenNebula目前的最新版本为4.12,本节将以4.12版在CentOS 7上安装为示例，简要介 绍其安装过程。</p>

<p>13.2.1控制端环境配置</p>

<p>环境配置包括IP地址、DNS地址、主机名及hosts文件等网络设置，关于此方面设置可 参考本书的第3章中的相关章节，此处不再赘述。</p>

<p>(1) SELinux 配置</p>

<p>SELinux为一项重要的配置，OpenNebula官方建议关闭SELinux,以免出现不必要的错误。 关闭SELinux需要修改文件/etc/sysconfig/selinux,如【示例13-1】所示。</p>

<p>【示例13-1】</p>

<p>[root@mal cat /etc/sysconfig/selinux</p>

<p>#    This file controls the state of SELinux on the system.</p>

<p>#    SELINUX= can take one of these three values:</p>

<p>#    enforcing - SELinux security policy is enforced.</p>

<p>#    permissive - SELinux prints warnings instead of enforcing.</p>

<p>#    disabled - No SELinux policy is loaded.</p>

<p>#修改以下值为disabled</p>

<p>SELINUX=disabled</p>

<p>#    SELINUXTYPE= can take one of these two values:</p>

<p>#    targeted - Targeted processes are protected,</p>

<p>#    minimum - Modification of targeted policy. Only selected processes are protected.</p>

<p>#    mis - Multi Level Security protection.</p>

<p>SELINUXTYPE=targeted</p>

<p>(2)防火墙配置</p>

<p>为了能使OpenNebula正常工作，还必须配置系统防火墙开放相关端口。在本例中将采取 关闭防火墙的方法，如【示例13-2】所示。</p>

<p>【示例13-2】</p>

<p>■■■</p>

<p>trootemal •&gt;•] # &lsquo;■ systertctl. disable &lsquo;ExrewalXd [root@mal # systemctl stop firewalld</p>

<p>(3)软件源配置</p>

<p>OpenNebula官方提供了软件源方便安装，直接在系统上添加软件源，然后使用yum工具 安装即可。新建一个名为opennebula.repo的文件，如【示例13-3】所示。</p>

<p>【示例13-3】</p>

<p>[root@mal -*] # cat /etc/yum. repos.d/opennebula. repo</p>

<p>[opennebula]</p>

<p>name=opennebula</p>

<p>baseurl=<a href="http://downloads.opennebula.org/repo/4.12/CentOS/7/x86_64">http://downloads.opennebula.org/repo/4.12/CentOS/7/x86_64</a></p>

<p>enabled=l</p>

<p>gpgcheck=O</p>

<p>到此环境配置就已经完成了，接下来就可以重新启动CentOS 7让所有配置生效。</p>

<p>13.2.2控制端安装</p>

<p>环境配置完成后就可以开始软件安装过程了，在开始安装之前还需要安装EPEL源，EPEL 源将提供一些额外的软件包。安装过程如【示例13-4】所示。</p>

<p>【示例13-4]</p>

<p>.• &hellip;. -</p>

<p>[root@mal # yum install -y epel-release Loaded plugins: fastestmirror, langpacks base</p>

<p>I 3.6 kB I 3.4 kB 1 2.9 kB I 3.4 kB 1    19</p>

<p>00:00 00:00 00:00 00:00 kB 00:00</p>

<p>extras</p>

<p>opennebula</p>

<p>updates</p>

<p>opennebula/primary_db</p>

<p>Loading mirror speeds from cached hostfile * base: mirrors.btte.net</p>

<p>★    extras: mirrors.yun-idc.com</p>

<p>*    updates: mirrors.yun-idc.com Resolving Dependencies</p>

<p>&ndash;&gt; Running transaction check</p>

<p>&mdash;&gt; Package epel-release.noarch 0:7-5 will be installed</p>

<p>&ndash;&gt; Finished Dependency Resolution</p>

<p>确认以上环境和软件都已经安装完成后，还需要安装依赖软件包，如【示例13-5】所示。</p>

<p>【示例13-5】</p>

<p>[root@mal 〜yum install -y gcc~c++ gcc sqlite-devel curl-devel mysql-devel ruby-devel make</p>

<p>Loaded plugins: fastestmirror, langpacks Loading mirror speeds from cached hostfile</p>

<p>*    base: mirrors.skyshe.cn</p>

<ul>
<li>epel: <a href="ftp://ftp.kddilabs.jp">ftp.kddilabs.jp</a></li>
</ul>

<p>*    extras: mirrors,sina,cn</p>

<p>*    updates: mirrors,sina.cn</p>

<p>Package 1:make-3.82-21.el7.x86__64 already installed and latest version</p>

<p>Resolving Dependencies</p>

<p>&ndash;&gt; Running transaction check</p>

<p>&mdash;&gt; Package gcc.x86_64 0:4.8.3-9.e!7 will be installed</p>

<p>安装完成后，就可以开始装OpenNebula,如【示例13-6】所示。</p>

<p>【示例13-6】</p>

<p>[root@mal # yum clean all</p>

<p>Loaded plugins: fastestmirror, langpacks</p>

<p>Cleaning repos: base epel extras opennebula updates Cleaning up everything    -</p>

<p>Cleaning up list of fastest mirrors</p>

<p>[root@mal # yum install ~y opennebula-server opennebula-sunstone opennebula-ruby</p>

<p>Loaded plugins: fastestmirror, langpacks Determining fastest mirrors</p>

<p>*    base: mirrors.btte.net</p>

<p>*    epel: <a href="ftp://ftp.kddilabs.jp">ftp.kddilabs.jp</a></p>

<p>*    extras: mirrors.yun-idc.com</p>

<p>*    updates: mirrors.yun~idc.com Resolving Dependencies</p>

<p>&ndash;&gt; Running transaction check</p>

<p>&mdash;&gt; Package opennebula-ruby.x86__64 0:4.12.1-1 will be installed</p>

<p>&ndash;&gt; Processing Dependency: rubygems for package:</p>

<p>opennebula-ruby-4.12..x86一64</p>

<p>&ndash;&gt; Processing Dependency: rubygem-nokogiri for package:</p>

<p>opennebula-ruby-4.12.1-1,x86_64</p>

<p>&ndash;&gt; Processing Dependency: rubygem-json for package:</p>

<p>opennebula-ruby-4.12.1-1.x86_64</p>

<p>安装完成后还需要安装Ruby库才能使用，OpenNebula提供了一个集成化的脚本，运行此 脚本即可安装，如【示例13-7】所示。</p>

<p>【示例13-7】</p>

<p>[root@mal # /usr/share/one/install__gems</p>

<p>Isb一release command not found. If you are using a RedHat based distribution install redhat-lsb</p>

<p>Select your distribution or press enter to continue without installing dependencies.</p>

<p>\0. Ubuntu/Debian 1. CentOS/RedHat/Scientific #此处需要选择操作系统类型 1</p>

<p>Distribution ’’redhat&rdquo; detected.</p>

<p>About to install these dependencies:</p>

<p>*    gcc-c++</p>

<p>*    gcc</p>

<p>*    sqlite-devel</p>

<p>*    curl-devel</p>

<p>*    mysqi-devel</p>

<p>*    ruby-devel</p>

<p>* make</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-303.jpg" alt="img" /></p>

<p>#需要安装依赖软件按Enter键即可 Press enter to continue&hellip;</p>

<p>#后面还会提示安装相关软件，按Enter键即可</p>

<p>由于许多源都位于国外，执行上述命令安装时有可能会因连接超时而导致整个安装失败， 此时可以添加国内的&rsquo;淘宝源，然后再执行上述命令。添加淘宝源命令如【示例13-8】所示。</p>

<p>【示例13-8】</p>

<p>[root@mal gem sources -a <a href="http://ruby.taobao.org/">http://ruby.taobao.org/</a> <a href="http://ruby.taobao.org/">http://ruby.taobao.org/</a> added to sources</p>

<p>胃中，可能会有许多警告信息，无须担心，忽略即可。</p>

<p>匕:,包错误导致失败，可继续运行上述命令重新安荦直到安装结束。</p>

<p>13.2.3客户端安装</p>

<p>OpenNebula可以使用多种虚拟化技术客户端，如KVM、Xen甚至是VMware,在本例中 将采用在CentOS 7中安装KVM作为客户端。CentOS 7中安装KVM的方法可参考本书的第 10章，此处不再赘述。</p>

<p>安装完KVM之后就可以开始安装OpenNebula的客户端程序了，客户端程序依然采用yum 工具安装，因此需要按13.2.1小节中的方法先配置yum源。安装方法如【示例13-9】所示。</p>

<p>【示例13-9】</p>

<p>鑿#设置好源之后最好先清除缓存再安装    ■: •&rsquo;乂</p>

<p>[root@nodel # yum clean all</p>

<p>Loaded plugins: fastestmirror, langpacks</p>

<p>Cleaning repos: base extras opennebula updates</p>

<p>Cleaning up everything</p>

<p>Cleaning up list of fastest mirrors</p>

<p>[rootQnodel -]# yum install ~y opennebula-node-kvm</p>

<p>Loaded pluginsfastestmirror, langpacks</p>

<table>
<thead>
<tr>
<th>base</th>
<th>1 3.6 kB</th>
<th>00:00</th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>extras</td>
<td>1 3.4 kB</td>
<td>00:00</td>
<td></td>
</tr>

<tr>
<td>opennebula</td>
<td>1 2.9 kB</td>
<td>00:00</td>
<td></td>
</tr>

<tr>
<td>updates</td>
<td>1 3.4 kB</td>
<td>00:00</td>
<td></td>
</tr>

<tr>
<td>(<sup>1</sup>&frasl;<sub>5</sub>): extras/7/x8^_64/primary_db</td>
<td>! 62</td>
<td>kB</td>
<td>00:00</td>
</tr>

<tr>
<td>(<sup>2</sup>&frasl;<sub>5</sub>): toase/7/x86_64/group_gz</td>
<td>1 154</td>
<td>kB</td>
<td>00:00</td>
</tr>

<tr>
<td>(<sup>3</sup>&frasl;<sub>5</sub>): updates/7/x86_64/priraary_db</td>
<td>1 2.5</td>
<td>MB</td>
<td>00:01</td>
</tr>

<tr>
<td>(<sup>4</sup>&frasl;<sub>5</sub>): base/7/x86_64/primary_db</td>
<td>1 5.1</td>
<td>MB</td>
<td>00:01</td>
</tr>

<tr>
<td>{<sup>5</sup>&frasl;<sub>5</sub>): opennebula/primary_dbDetermining fastest mirrors*    base: mirrors.sina.cn*    extras: mirrors.sina.cn*    updates: mirror.bit.edu.cn</td>
<td>I 19 :</td>
<td>k.B</td>
<td>00:03</td>
</tr>
</tbody>
</table>

<p>Resolving Dependencies</p>

<p>&ndash;&gt; Running transaction check</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-304.jpg" alt="img" /></p>

<p>如果使用Xen虚拟化，除以上安装的软件包外，客户端还需要安装一个名为</p>

<p>openebula-common 的软件包。</p>

<p>13.2.4配置控制端和客户端</p>

<p>所有软件安装完成后还不能立即使用，还需要做一些配置，包括密码、SSH验证等方面。 本小节将简要介绍如何配置控制端和客户端。</p>

<p>1.控制端主守护进程配置</p>

<p>控制端有两个守护进程需要配置，其一是oned，这是OpenNebula的主要进程，所有主要 功能都通过此进程完成；另一个称为sunstone,这是一个图形化的用户接口。启动OpenNebula 需要启动这两个进程，首先需要配置的是主守护进程。</p>

<p>安装完控制端后，OpenNebula会向系统添加一个名为oneadmin的用户，OpenNebula将 以此用户的身份管理整个软件。首先需要添加系统认证的密码，如【示例13-10】所示。</p>

<p>【示例13-10】</p>

<p>#切换到用户oneadmin</p>

<p>[rootSmal ~J# su - oneadmin</p>

<p>#添加初始化密码并修改认证文件的权限</p>

<p>[oneadmin@mal •*] $ mkdir ~/.one</p>

<p>#以下设置必须在第一次启动之前做</p>

<p>#此处演示密码为password</p>

<p>[oneadmin@mal $ echo &ldquo;oneadmin:password&rdquo; ＞〜/-Qne/one 一auth</p>

<p>[oneadmin@mal chmod 600 〜/ .one/one一auth</p>

<p>#以下仅为测试，可选步骤</p>

<p>#建议在【示例13-11】之后做</p>

<p>#启动OpenNebula守护进程</p>

<p>#使用查看虚拟机列表的方式验证是否成功启动</p>

<p>[oneadmin@mal 〜]$ one start</p>

<p>[oneadmin@mal 〜]$ onevm list</p>

<p>ID USER GROUP NAME    STAT UCPU UMEM HOST    TIME</p>

<p>在上面的示例中需要使用密码替换password字符串，此处设置的密码为第一次启动的密码。</p>

<p>2.图形化用户接口配置</p>

<p>图形化用户接口进程为sunstone,默认情况下该进程只在本地环回接口（接口名为lo, IP 地址为127.0.0.1）侦听，其他计算机均无法访问。为了能使其他计算机都能访问，需要修改侦 听地址，如【示例13-11 ]所示。</p>

<p>【示例13-11】</p>

<p>#修改sunstone服务的配置文件</p>

<p>[root@mal # cat /etc/one/sunstone-server.conf #</p>

<p>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;#</p>

<p>#    Copyright 2002-2015, OpenNebula Project (OpenNebula.org), C12G Labs    #</p>

<p>#    #</p>

<p>#    Licensed under the Apache License, Version 2.0 (the ’’License’’)； you may #</p>

<p>#    not use this file except in compliance with the License. You may obtain #</p>

<p>#    a copy of the License at #部分内容省略</p>

<p>#    Server Configuration</p>

<p>#</p>

<p>#修改侦听地址127.0.0.1为0.0.0.0 #该和位于第31行 :host: 0.0.0.0 :port: 9869</p>

<p>#    Place where to store sessions, this value can be memory or memcache</p>

<p>#    Use memcache when starting multiple server processes, for example,</p>

<p>#    with passenger</p>

<p>#完成上述设置后需要开启开关服务</p>

<p>[root@mal # systemctl enable opennebula</p>

<p>In 一s &lsquo;/usr/lib/systemd/system/opennebula.service *</p>

<p>•/etc/systemd/system/multi-user.target.wants/opennebula.service1 [root@mal # systemctl start opennebula [root@mal ~]# systemctl enable opennebula-sunstone In -s */usr/lib/systemd/system/opennebula-sunstone.service *</p>

<p>1/etc/systemd/system</p>

<p>[root@mal 〜]# systemctl start opennebula-sunstone</p>

<p>完成上述步骤后就可以通过网页打开Sunstone 了，如图13.3所示。</p>

<table>
<thead>
<tr>
<th>A OpenNebul* Sunstone x</th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>«    C    172.16.45.22 &rsquo;S&rdquo;</td>
<td></td>
</tr>

<tr>
<td>OpenNebulaSunstone</td>
<td></td>
</tr>

<tr>
<td>Usernamef    ]</td>
<td></td>
</tr>

<tr>
<td>I    JPassword1    1</td>
<td></td>
</tr>

<tr>
<td>。Login</td>
<td></td>
</tr>

<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p>图 13.3 Sunstone 界面</p>

<p>访问Sunstone时需要注意，不建议使用IE内核的浏览器，建议使用Mozilla Hrefox或 Google Chrome等非IE内核浏览器；另一个问题是控制端与访问计算机的时间相差不能太大, 否则会导致失败。</p>

<p>3.配置NFS</p>

<p>如果使用多节点的OpenNebula，需要在控制端上配置NFS （控制端与客户端位于同一服 务器时无须此配置），如【示例13-12】所示。</p>

<p>【示例13-12】</p>

<p>#设置NFS将目录八ar/lib/one共享 [root@mal # cat /etc/exports</p>

<p>/var/lib/one/ *(rwz syncz no_sufatree_check,roOt_squash) [root@mal # systemctl jstart nfs</p>

<p>当控制端配置了 NFS之后，客户端还需要配置NFS挂载（NFS共享的目录相当于存储， 关于此问题可参考官方网站关于存储的说明）。挂载应该写入文件/etc/fstab,写入内容如下所 示：</p>

<p>#将下面这行内容添加到/etc/f stab文件最后</p>

<p>172.16.45.22:Zvar/lib/one/ /var/lib/one/ nfs soft,intr,rsi2e=8192rwsize=8192,noauto</p>

<p>#验证配置</p>

<p>[rootSnodel 〜J# mount -a</p>

<p>{root0nodel # df -h | grep Zvar/lib/one</p>

<p>172,16,45*22:/var/lib/one 458G    18G    440G    4% /var/lib/one</p>

<p>4.配置SSH公钥</p>

<p>OpenNebula使用SSH远程登录到Node上，然后执行各种管理命令，因此必须要配置SSH 服务，让管理端的oneadmin用户能够自动登录，而不需要密码。控制端配置如【示例13-13】 所示。</p>

<p>【示例13-13】</p>

<p>#以oneadmin登录并设置ssh登录方式 [.ropt@mal ,    # su oneadmin</p>

<p>[oneadmin@mal 〜J$ cat -/.ssh/config Hosj: *</p>

<p>St rictHostKeyChec king no UserKnownHostsFile /dev/null {oneadmin@ma1    $ chmod 600 -/.ssh/config</p>

<p>#生成公钥和私钥</p>

<p>#以下命令需要按3次Enter键 [oneadmin@raal ~ 3 $ ssh-keygen</p>

<p>Generating public/private rsa key pair.</p>

<p>Enter file in which to save the key (/var/lib/one/.ssh/id_rsa Enter passphrase (empty for no passphrase):</p>

<p>Enter same passphrase again:</p>

<p>Your identification has been saved in /var/lib/one/.ssh/id rsa.</p>

<p>Your public key has been saved in /var/lib/one/.ssh/id__rsa.pub.</p>

<p>The key fingerprint is:</p>

<p>ef:e6:lb:70:f2:cc:35:8b:45:65:6f:25:90:d8:lb:e6 <a href="mailto:oneadmin@mal.example.com">oneadmin@mal.example.com</a> The key&rsquo;s randomart image is:</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-305.jpg" alt="img" /></p>

<p>#修改生成文件的权限</p>

<p>[oneadmin@mal $ chmod 600 .ssh/*</p>

<p>并将公钥传递给nodel上 #执行以下命令吋需要输入nodel的root密码</p>

<p>[oneadminQmal $ scp .ssh/id一rsa.pub rootQnodel:/var/lib/one</p>

<p>Warning: Permanently added <em>nodel,172.16.45.23</em> (ECDSA) to the list of known</p>

<p>hosts.</p>

<p>root@nodel1s password:</p>

<p>id一 rsa.pub    100% 406    0.4KB/S    00:00</p>

<p>送文件成功后需要在nodel上继续操作</p>

<p>#注意以下步骤在nodel上执行 #先修改传送过来的文件仅限</p>

<p>[root@nodel # chown oneadmin.oneadrain /var/lib/one/id_rsa.pub</p>

<p>#切换到oneadmin用户执行后继操作</p>

<p>[root@nodel 〜H su 一 oneadmin</p>

<p>Last login: Fri Jul 3 09:56:46 CST 2015 on pts/0 #创建目录并导入公钥</p>

<p>[oneadmin@nodel [oneadmin@nodel [oneadmin@nodel</p>

<p>#修改权限</p>

<p>[oneadmin@nodel [oneadmin®nodel</p>

<p>$ mkdir .ssh</p>

<p>mv id一rsa.pub 〜/.ssh/</p>

<p>~]$ cat 〜/.ssh/id一rsa.pub &gt;&gt; -7 .ssh/authorized一keys</p>

<p>$ chmod 600 .ssh/authorized_keys ~3 $ chmod 700 .ssh/</p>

<p>#测试效果</p>

<p>#此操作在控制端进行</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-306.jpg" alt="img" /></p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-307.jpg" alt="img" /></p>

<p>#第一次登录时需要输入yes [root@mal # su ~ oneadmin</p>

<p>Last login: Fri Jul 3 09:49:13 CST 2015 on pts/0 {oneadmin@raal ~3 $ ssh nodel</p>

<p>Warning: Permanently added &lsquo;nodel,172.16.45.23* (ECDSA) to the list of known hosts.</p>

<p>Last login: Fri Jul 3 10:06:21 2015 from mal</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-308.jpg" alt="img" /></p>

<p>无论哪种方案都需要配置SSH,即使控制端与客户端在同一服务器上，同时建议将控制 端也做成一个客户端，以便配置和安装镜像。</p>

<p>&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip; &hellip;&hellip;&hellip;&hellip;. &hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;..v J</p>

<p>5.客户端KVM配置</p>

<p>在客户端上安装KVM并设置桥接等内容可参考第10章的相关内容，此处不再赞述。此 处还需要对KVM做一些配置，如【示例13-14】所示。</p>

<p>【示例13-14】</p>

<p>#设置用户和组</p>

<p>{root@mal # cat /etc/libvirt/qemu.conf</p>

<p>user = &ldquo;oneadmin”</p>

<p>group - &ldquo;oneadmin”</p>

<p>dynamic^ownership = 0</p>

<p>security_driver = ttnone&rdquo;</p>

<p>security—default二confined = 0</p>

<p>#配置libvirtd服务侦听</p>

<p>IrootSmal ~,J# .&lsquo;Cat /etc/libvirtZlibvirtd.conf</p>

<p>#部分设置省略 ••••••</p>

<p>#配置项为第22行和第33行 #分别取消这两行的注释，如下所示</p>

<p>#    It is necessary to setup a CA and issue server certificates before</p>

<p>#    using this capability.</p>

<p>#</p>

<p>#    This is enabled by default, uncomment this to disable it listen tls = 0</p>

<p>#    Listen for unencrypted TCP connections on the public TCP/XP port.</p>

<p>#    NB, must pass the &ndash;listen flag to the libvirtd process for this to</p>

<p>#    have any effect.</p>

<p>#    Using the TCP socket requires SASL authentication by default. Only</p>

<p>#    SASL mechanisms which support data encryption are allowed. This is</p>

<p>#    DIGEST MD5 and GSSAPX (KerberosS)</p>

<p># This is disabled by default, uncomment this to enable it. listen一tcp = 1</p>

<p>#开启服务监听选项</p>

<p>[roois@mal cat /etc/sysconfig/libvirtd</p>

<p>#    Override the default config file</p>

<p>#    NOTE: This setting is no longer honoured if using</p>

<p>#    systemd. Set *-一config /etc/libvirt/libvirtd.conf *</p>

<p>#    in LIBVIRTD_ARGS instead. #LIBVIRTD_CONFIG=s/etc/libvirt/libvirtd. conf</p>

<p>#    Listen for TCP/IP connections</p>

<p>#    NB. must setup TLS/SSL keys prior to using this #取消下面的注释</p>

<p>LIBVIRTD一 ARGS:&ldquo;&ndash;listen&rdquo;</p>

<p>#重启服务并检查设置是否生效</p>

<p>[root@mal systemctl restart libvirtd [root@mal # netstat -tunlp I grep libvirtd</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-309.jpg" alt="img" /></p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-310.jpg" alt="img" /></p>

<p>tcp    0    0 0.0.0.0:16509</p>

<p>24179/libvirtd</p>

<p>tcp6    0    0 :::16509</p>

<p>24179/libvirtd</p>

<p>0.0.0,0:*</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-311.jpg" alt="img" /></p>

<p>LISTEN</p>

<p>LISTEN</p>

<p>至此服务端和客户端都已经配置完成了。</p>

<p>373</p>

<p>13.3 OpenNebula配置与应用</p>

<p>学习了 OpenNebula的安装之后，接下就可以配置OpenNebula 了，内容包括:配置Sunstone、 VDC和集群，设置映像、模板管理、虚拟机管理等。与第10章中介绍的oVirt相比，OpenNebula 还有大量的工作需要做，这些工作主要来自映像、模板和虚拟机管理。本节将简要介绍如何将 安装好的OpenNebula组装为一个可用的集群，并添加一些映像、模板，最后实例化为虚拟机。</p>

<p>13.3.1配置VDC和集群</p>

<p>首次登录Sunstone之后，可以发现其默认语言为英语，可以修改为简体中文。修改的方 法为先单击右上角的当前登录的用户名，然后在菜单中选择“Settings”。在弹出的配置界面右 上角单击“Conf”，如图13.4所示。</p>

<p>Configuration</p>

<table>
<thead>
<tr>
<th>O    0Info    Conf</th>
<th>QuoUs</th>
<th>Accounung    Sfwwbdck</th>
</tr>
</thead>

<tbody>
<tr>
<td>Language.</td>
<td></td>
<td></td>
</tr>

<tr>
<td>Simplified Chinese (zh_CN)</td>
<td></td>
<td>*</td>
</tr>

<tr>
<td>\ACWS：</td>
<td></td>
<td></td>
</tr>

<tr>
<td>admin</td>
<td></td>
<td>督</td>
</tr>

<tr>
<td>Default Table order:descending</td>
<td></td>
<td>•</td>
</tr>
</tbody>
</table>

<p>Update config</p>

<p>图13.4 Sunstone语言配置</p>

<p>在 “Language” 下拉列表框中选择 “Simplified Chinese(zh CN)&ldquo;,然后单击 “Update config” 按钮即可将默认语言修改为简体中文。</p>

<p>VDC (Virtual Data Centers,虚拟数据中心)与oVirt中的数据中心概念相似，表示一组或 多组功能集群的集合。但在OpenNebula中数据中心和集群的概念相对较弱，几乎没有过多的 约束设置，只有在做故障迁移等设置时，这些设置才起作用。如果没有故障迁移等方面的需求， 也可跳过虚拟数据中心和集群设置。</p>

<p>添加VDC可以在Sunstone界面左侧的索统设置中选择“VDCs”，此时右侧将显示已存在 的虚拟数据中心。单击虚拟数据中心列表上方的加号，将弹出添加VDC界面，如图13.5所示。</p>

<table>
<thead>
<tr>
<th></th>
<th></th>
<th>&lt;| OpenNebula</th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>OpenNebula</td>
<td>Create Virtual Data Center</td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>曲&amp;控制台</td>
<td></td>
<td>ts</td>
<td></td>
<td>向导    《^6</td>
</tr>

<tr>
<td>as系统设s</td>
<td>as</td>
<td>it</td>
<td>a</td>
<td></td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>解娜珲</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>I VOCS</td>
<td>名称：&amp;</td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>仍1*^•苗</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>.戲臟</td>
<td>掮述：</td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>£础设施</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>■R fWT5«</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>&amp; Often®*</td>
<td>自定乂霣忮</td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>◎ Support</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>comcttcd</td>
<td>名件</td>
<td></td>
<td>值</td>
<td></td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
<td>OoJrtNebiM &lt;    «*f OpcIMb!** &lsquo; fS^rni</td>
<td></td>
</tr>
</tbody>
</table>

<p>图13.5添力口 VDC</p>

<p>在创建VDC界面的“常规”选项中输入数据中心的名称、描述信息，然后在“资源”中 为数据中心添加己存在的集群、主机、网络和数据仓库，最后单击上面的“创建”按钮即可= 需要注意的是，数据仓库已经在安装时自动创建，此处可以直接选择所有数据仓库将其一并添 加到数据中心中。</p>

<p>添加完VDC后，接下来需要创建集群。单击左侧基础设施中的集群管理，界面右侧将显示 当前系统中的集群列表。单击集群列表上方的加号将弹出“创建集群”界面，如图13.6所示。</p>

<p>创建集群</p>

<p>[malnClustcrJ</p>

<p>O Gr</p>

<p>主机管®    由拟网络    教堳仓厍</p>

<p>已分配CPU    已分配内存</p>

<p>172.16.45.22</p>

<p>100/40G    S12MB/3.7C6    ■</p>

<p>(3TO)    fW)    測</p>

<p>1育从列*中迭择一个或者多个主机</p>

<p>图13.6创建集群</p>

<p>在“名称”中输入集群名称，然后在“主机管理”中选中主机、“虚拟网络”中选择添加 的网络，然后选择“数据仓库”，最后单击“创建”按钮即可。</p>

<p>添加完集群和数据中心后,可以在数据中心界面中的数据中心列表中单击创建的数据中心 查看数据中心详情。在数据中心详情界面右上角单击更新，然后在资源选项的集群管理中为数 据中心添加集群。也可以更新数据仓库等设置，集群也可使用同样的方法更新设置。</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-312.jpg" alt="img" /></p>

<p>OpenNebula还预设了各种角色和用户，同时还提供了计费等功能，本书中并不涉及，读j</p>

<p>者可自行参考相关资料了解。</p>

<p>is&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-</p>

<p>13.3.2添加KVM主机</p>

<p>主机是云计算中的计算节点，通俗地讲主机主要是将存储资源、网络资源集中起来，并使 用自身的计算资源以虚拟机的方式汇集各种资源为客户提供服务。OpenNebula中可以添加的 主机有Xen、KVM、VMware及vCenter,由于红帽公司主导使用KVM虚拟化，因此本书中 主要介绍KVM主机的使用方法，其他主机并不涉及，如需使用可以参考OpenNebula的官方 文档了解。</p>

<p>添加KVM主机有两种方法，其一是使用Sunstone提供的图形化接口；其二是使用CLI 命令方式添加。在添加主机之前，需要确保主机的SELinux、防火墙、SSH、KVM、NFS等 均已正确设置，具体设置细节可参考13.2节中的相关内容了解，此处不再赘述。</p>

<p>1 .在Sunstone中添加主机</p>

<p>在Sunstone界面的左侧基础设施中选择主机管理，此时右侧将显示主机列表。单击主机 列表上方的加号，将弹出创建主机界面，如图13.7所示。</p>

<table>
<thead>
<tr>
<th>创建主机</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td></td>
<td></td>
<td>集群</td>
<td></td>
</tr>

<tr>
<td>KVM</td>
<td>▼</td>
<td>100: ma&lt;nduscer</td>
<td>•</td>
</tr>

<tr>
<td>主机名</td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>172.16.45.23</td>
<td></td>
<td>缺省值(dummy)</td>
<td>•</td>
</tr>
</tbody>
</table>

<p>图13.7创建主机界面</p>

<p>在创建主机界面中选择正确的类型，选择主机所属的集群和网络(此处网络设置选择默 认)，并在主机名中填入主机的IP地址或主机名，最后单击创建即可。需要注意的是，如果使 用主机名，一定要确保能正确解析，否则添加主机可能会失败。</p>

<p>主机添加完成后，就可以在主机列表中看到该主机，如图13.8所示。</p>

<table>
<thead>
<tr>
<th></th>
<th>主机管理</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>AftftR    «用    源用</td>
<td></td>
</tr>

<tr>
<td>齒 IO«名称</td>
<td>集群</td>
<td>运行VM数量</td>
<td>已分紀CPU    已分配内存</td>
<td>状态</td>
<td></td>
<td></td>
</tr>

<tr>
<td>© 1</td>
<td>172.16.45.23</td>
<td>malnClusfor</td>
<td>0</td>
<td></td>
<td>0/必    0*6?-</td>
<td></td>
</tr>

<tr>
<td>镜 0</td>
<td>172J6.45.22</td>
<td></td>
<td></td>
<td></td>
<td>100 /400125%)    512MB/3 7CB 门</td>
<td>幵机</td>
</tr>

<tr>
<td>showing</td>
<td>•. to 2 0( ? dwries</td>
<td></td>
<td></td>
<td></td>
<td>PtCSrtObs    1    Nr-O</td>
<td>10 -</td>
</tr>

<tr>
<td></td>
<td></td>
<td>1</td>
<td>1</td>
<td>0:</td>
<td>0 f2;fr</td>
<td></td>
</tr>
</tbody>
</table>

<p>图13.8主机列表</p>

<p>可以看到新添加的主机状态为“初始化”，当主机初始化完成后，状态将变为“开机”，此 时主机可用，否则主机将不可用，此时就需要查看日志排错。</p>

<p>在主机列表中单击任意一台主机，将显示主机信息，如图13.9所示。</p>

<table>
<thead>
<tr>
<th>O    I舶</th>
<th>a</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>aw.</td>
<td>V&rsquo;M棚</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td></td>
<td></td>
<td>容璽</td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td></td>
<td>0</td>
<td></td>
<td></td>
<td></td>
<td>Sl2M8/i7C6sUHI</td>
</tr>

<tr>
<td></td>
<td>172,16.45.22</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td></td>
<td>MONITORED</td>
<td>娜哺</td>
<td></td>
<td></td>
<td>(MB }7G&amp;rj46i</td>
</tr>

<tr>
<td>•岛!JO 间 ct</td>
<td>kvm</td>
<td>卿</td>
<td></td>
<td></td>
<td>0 »-W010H)</td>
</tr>

<tr>
<td>伽lnJ揀中间件触堪件</td>
<td>kvmdurnmy</td>
<td>sGVMfJ 簷</td>
<td></td>
<td></td>
<td>1</td>
</tr>

<tr>
<td>厲性</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>AMCM</td>
<td>»se_&amp;4</td>
<td></td>
<td>rjt</td>
<td>«9r</td>
<td></td>
</tr>

<tr>
<td>CPUSPFFD</td>
<td>2524</td>
<td></td>
<td>C?</td>
<td>Sr</td>
<td></td>
</tr>

<tr>
<td></td>
<td>ma&rsquo; cxamplc.com</td>
<td></td>
<td>GT</td>
<td>s</td>
<td></td>
</tr>

<tr>
<td>HVPtKVJSOR</td>
<td>kvm</td>
<td></td>
<td>or</td>
<td>s</td>
<td></td>
</tr>

<tr>
<td>MODELS AME</td>
<td>(nteJ&reg; CwtXTM) *3-2130 CPU 砂 3.40&amp;H»</td>
<td></td>
<td>5</td>
<td></td>
<td></td>
</tr>

<tr>
<td>NF7RX</td>
<td>0</td>
<td></td>
<td>&lt;3</td>
<td>a</td>
<td></td>
</tr>

<tr>
<td>Nenx</td>
<td>0</td>
<td></td>
<td>{?</td>
<td>e&gt;</td>
<td></td>
</tr>

<tr>
<td>RtSt*VH5_CRJ</td>
<td></td>
<td></td>
<td>uT</td>
<td>苗</td>
<td></td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td>5</td>
<td></td>
</tr>

<tr>
<td>VFRSION</td>
<td>A. 12.1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p>图13.9主机信息</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-313.jpg" alt="img" /></p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-314.jpg" alt="img" /></p>

<p>在主机信息界面的信息选项中可以查看到当前主机的主要信息，如已分配CPU、内存、 CPU型号等。在图表信息中将显示过去一段时间内CPU和内存的使用情况，vm数量将显示 当前主机运行的主机列表。</p>

<p>2.使用CLI拭添加</p>

<p>使用CLI方式添加主机与图形界面所需参数相同，添加过程如【示例13-15］所示。</p>

<p>【示例13-15】</p>

<p>#此命令需要在控制端执行 #需要以用户oneadmin身份执行 [rootQmal # su - oneadndn #参数参考图形界面中的参数设置</p>

<p>[oneadmin@mal ~]$ onehost create 172.16.45.22 ——im kvm &ndash;vm kvm &ndash;net dummy ID: 0</p>

<p>#査看添加主机情况</p>

<p>#刚添加时主机状态处于init初始化状态 #初始化完成后状态将变为on [oneadmin^mal $ onehost list ID NAME    CLUSTER RVM    ALLOCATED一CPU</p>

<p>ALLOCATED一 MEM STAT -init</p>

<p>0 172.16.45.22    0    -</p>

<p>13.3.3建立映像</p>

<p>OpenNebula安装完成后建立虚拟时，需要使用操作系统模板，模板可以快速转换为虚拟 机，而不再需要安装操作系统。建立系统模板需要使用磁盘映像，磁盘映像就是虚拟磁盘文件。</p>

<p>OpenNebula提供了两种方法建立映像，其一是使用官方提供映像和模板；其二是用户自己建 立磁盘文件安装系统制作映像。</p>

<p>1.使用官方映像和模板</p>

<p>使用官方提供的映像和模板可以在Sunstone界面的左侧选择应用市场，此时右侧将显示 官方提供的映像列表，如图13.10所示。</p>

<table>
<thead>
<tr>
<th></th>
<th>OpenNebula 市杨</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>累入</td>
</tr>

<tr>
<td>▲</td>
<td>名称</td>
<td>发布者</td>
<td>Hypervisor</td>
<td>处理器渊</td>
<td>格式</td>
</tr>

<tr>
<td></td>
<td>SJaok rcwplotc - wdc</td>
<td>vOC-Srorc</td>
<td>KW</td>
<td>None</td>
<td>raw</td>
</tr>

<tr>
<td></td>
<td>Ubuntu Servo 13.10 *2 - vdc</td>
<td>vOC-Sto»c</td>
<td>KVM</td>
<td>功6-64</td>
<td>raw</td>
</tr>

<tr>
<td></td>
<td>Peppc^niint 4 Desktop - vdi</td>
<td>VDC-Stort</td>
<td>KVM</td>
<td>m86.M</td>
<td>raw</td>
</tr>

<tr>
<td>适</td>
<td>IXJ Bridge Direct Cloud SJavc Appliance</td>
<td>MTA SZTAKI LPOS</td>
<td>KVM</td>
<td>*«6.M</td>
<td>raw</td>
</tr>

<tr>
<td></td>
<td>Ky!!nuxwrno</td>
<td>□pcnNebuia.«g</td>
<td>KVM</td>
<td>x86_fc4</td>
<td>r^w</td>
</tr>

<tr>
<td></td>
<td>OpenNebub vlrwat Router</td>
<td>Opcnhiebuia.ofg</td>
<td>di</td>
<td>*£6.W</td>
<td>raw</td>
</tr>

<tr>
<td>©</td>
<td>CentOS 6-5 - KVM</td>
<td>OpenNebuU Systems</td>
<td>nVM</td>
<td>X86.6i</td>
<td>*4W</td>
</tr>

<tr>
<td>&amp;</td>
<td>CWtOS 7 KVM</td>
<td>Oper.Nebu»a SyMcnis</td>
<td>dil</td>
<td>X86.&amp;1</td>
<td>raw</td>
</tr>

<tr>
<td>饴</td>
<td>Ubuntu 14.W- xvm</td>
<td>OponNcbtiU Systtm</td>
<td>KVM</td>
<td>X86.64</td>
<td>raw</td>
</tr>

<tr>
<td>12</td>
<td>D«Jidn 7 - KVM</td>
<td>OpenNebula Systems</td>
<td>KVM</td>
<td>&lt;«6.W</td>
<td>raw</td>
</tr>

<tr>
<td>SffsfMtig ；&gt; <n^0a> 33 enfrw&rsquo;S</td>
<td>Previous</td>
<td>2    3 A</td>
<td>NeXT</td>
<td>10 *</td>
<td></td>
</tr>
</tbody>
</table>

<p>图 13.10 OpenNebula 市场</p>

<p>映像列表中详细列举了系统名称和版本、发布人、客户端类型、处理器架构及虚拟磁盘映 像使用的格式等。如果需要查看某个映像的详细信息只需要单击映像，将显示映像的详细描述。 在映像列表中勾选需要使用的映像，然后单击右上角的导入按钮，将弹出导入应用界面，如图 13.11所示。</p>

<p>X</p>

<p>导入应用</p>

<p>以下映像捋在系统中创連如巢你0修汐磁盘映像的费尠，随后可以在磁盘映像选质卡 中修改</p>

<p>迭择用于招盘睐像数据仓库 1： default    •</p>

<p>土 0映像名称    106B</p>

<p>CcniOS-6.5-ono-4.8</p>

<p>T®的模板将埔紉連在Opc州cbuU，以前的睐像将在SS中引用如累你想诿改横板 的費豹，随后可以在榍板选项卡中倦改</p>

<p>@禊板名打 CentOS 6.5 - KVM</p>

<p>导入</p>

<p>图13.11导入应用</p>

<p>在“导入应用”窗口中选择数据仓库，填入映像名称、模板名称，然后单击“导入”按钮 即可。然后在左侧的虚拟资源中的映像管理和模板管理中，可以看到导入的应用，但在下载完 成前映像和模板将无法使用。</p>

<p>使用导入应用的方式创建模板十分方便、快捷，但如果网络不通畅（下载地址为国外地址） 导致超时将会添加失败。</p>

<p>2.自制映像</p>

<p>磁盘映像有多种格式，如raw、qcow2、qed、vmdk、vdi等，这些格式都拥有不同的特性， 读者可阅读相关文档了解这些格式的特点。在本例中将采用KVM默认使用的qcow2作为映像 格式，建立映像过程如【示例13-16】所示。</p>

<p>【示例13-16】</p>

<p>#此操作在控制端进行 [root@mal # cd /data/</p>

<p>#创建一个虚拟磁盘，空间大小为</p>

<p>(root@mal data]# qemu-img create -f qcow2 CentOS6.5-x86_64-Desktop.qcow2 15G Formatting *CentOS6.5-x86_64-Desktop.qcow21, fmt~qcow2 size=l6106127360</p>

<p>encryption=off cluster一size=65536 lazy^refcounts^off</p>

<p>[root@mal data]# qemu-img info CentOS6.5~x86_64~Desktop.qcow2 image: CentOS6.5-x86__64~Desktop.qcow2</p>

<p>file format: qcow2</p>

<p>virtual size: 15G (16106127360 bytes) disk size: 196K cluster一size: 65536 Format specific information:</p>

<p>compat: 1.1</p>

<p>lazy refcounts: false</p>

<p>#磁盘创建好之后就可以创建一个虚拟机 #将操作系统安装到创建的虚拟磁盘上 #创建虚拟机并为虚拟机指定磁盘和光驱 #参数m指定创建内存为1024M #参数-boot d表示使用光驱引导</p>

<p>#参数-nographic -vnc : 0表示使用VNC远程访问控制台 #网卡参数也可不设</p>

<p>[rootSmal data]# /usr/libexec/qemu-kvm -m 1024 \    -</p>

<p>&gt;    -cdrom /data/CentOS-6.5-x86_64-bin-DVDl.isq </p>

<p>&gt;    -drive file=/data/CentOS6.5-x86_64-Desktop.qcow2,if=virtio </p>

<p>&gt;    -net nic,model=virtio -net tap, script=no -boot d -nographic ■-vnc 0</p>

<p>执行上述命令后，使用VNC Viewer在服务器地址中输入172.16.45.22: 5900，远程连接 到虚拟机，如图13.12所示。</p>

<p>图13.12 VNC远程连接虚拟机控制台</p>

<p>在虚拟机的控制台中将系统安装完成并作相应的设置后，在控制台中关闭系统，这样就得 到了一个安装了系统的虚拟磁盘。</p>

<p>接下来就需要将虚拟磁盘导入OpenNebula，可以使用两种方法导入映像，其一是使用CLI 命令方式；其二是在Sunstone中导入映像。无论使用哪种方式导入映像，都需要保证oneadmin 用户能读取映像文件，否则导入将失败。使用CLI命令方式导入过程如【示例13-17】所示。</p>

<p>【示例13-17】</p>

<p>#以下命令在控制端执行</p>

<p>#首行査看权限</p>

<p>[root0mal data]# 11 CentOS6&lt;5-x86_64-Desktop.qcow2</p>

<p>-rw-r&ndash;r&ndash; 1 root root 4236247040 Jul 7 11:02 CentOS6.5-x86_64~Desktop.qcow2 #切换用户到oneadmin并査看系统中的映像列表 [root@mal data]# su - oneadmin [oneadmin@mal oneimage list</p>

<p>ID USER    GROUP NAME    DATASTORE SIZE TYPE PER STAT RVMS</p>

<p>0 oneadmin oneadmin CentOS6.5~x8 default    15G OS No used 1</p>

<p>#编辑导入文件，内容如下所示    ~</p>

<p>[oneadmin@mal ，3$ cat centos.one</p>

<p>NAME    -    HCentOS6,5-x86_64~Desktopn</p>

<p>PATH    -    w/data/CentOS6.5~x86_64-Desktop.qcow2n</p>

<p>TYPE    =    OS</p>

<p>DESCRIPTION = &ldquo;centos 6.5 desktop&rdquo;</p>

<p>DRIVER    =    qcow2</p>

<p>#査看数据仓库</p>

<p>[oneadirtin@mal ~] $ onedatastore list</p>

<p>ID NAME    SIZE AVAIL CLUSTER    IMAGES TYPE DS    TM STA</p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-316.jpg" alt="img" /></p>

<p><img src="11 CentOS7fbdfa1060ed0f49e18-317.jpg" alt="img" /></p>

<table>
<thead>
<tr>
<th>0</th>
<th>system</th>
<th>457.8G</th>
<th>96%</th>
<th>raainCluster</th>
<th>0</th>
<th>sys</th>
<th>-</th>
<th>shared</th>
<th>on</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td>default</td>
<td>457.8G</td>
<td>96%</td>
<td>mainCluster</td>
<td>1</td>
<td>img</td>
<td>fs</td>
<td>shared</td>
<td>on</td>
</tr>

<tr>
<td>2</td>
<td>files</td>
<td>457.8G</td>
<td>96%</td>
<td>mainCluster</td>
<td>0</td>
<td>fil</td>
<td>fs</td>
<td>ssh</td>
<td>on</td>
</tr>
</tbody>
</table>

<p>#将映像导入到default中</p>

<p>[oneadmin@mal $ oneimage create centos.one &ndash;datastore default ID: 1</p>

<p>释命令执行后添加的映像状态为lock 弈命令输出的映像名称不完全，但在Sunstone中显示正常 [oneadmin@mal -]$ oneimage list</p>

<p>ID USER    GROUP    NAME    DATASTORE</p>

<p>SIZE TYPE PER STAT RVMS 15G OS    No used    1</p>

<p>15G OS    No lock    0</p>

<p>0 oneadmin oneadmin CentOS6.5-x86_6 default 1 oneadmin oneadmin CentOS6.5-x86一6 default 毋导入后映像的状态将变为rdy</p>

<p>[oneadmin@mal $ oneimage list</p>

<p>SIZE TYPE PER STAT RVMS 15G OS    No used    1</p>

<p>15G OS    No rdv    0</p>

<p>ID USER    GROUP    NAME    DATASTORE</p>

<p>0 oneadmin oneadmin CentOS6.5~x86_6 default 1 oneadmin oneadmin CentOS6.5-x86_6 default</p>

<p>在Sunstone中添加映像需要在左侧选中虚拟资源中的映像管理，右侧窗口将显示当前映 像列表，单击列表上方的加号弹出创建映像窗口，如图13.13所示。</p>

<table>
<thead>
<tr>
<th>X</th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>创建磁盘映像</td>
<td>向导    高级横式</td>
<td></td>
</tr>

<tr>
<td>名称oCcntO56.5- x^6_64-scn/cr</td>
<td></td>
<td></td>
</tr>

<tr>
<td>描述oserver</td>
<td></td>
<td></td>
</tr>

<tr>
<td>类型O</td>
<td>鯉仓库O</td>
<td></td>
</tr>

<tr>
<td>OS</td>
<td>V. default□歉性©</td>
<td></td>
</tr>

<tr>
<td>磁盘映倌位置：</td>
<td></td>
<td></td>
</tr>

<tr>
<td>遞提供一卜路径e路径o/dato/Con tOS6.5-xS6&gt;_64-scrvcr .qct»w2</td>
<td>上传    芏白Dawblock</td>
<td></td>
</tr>

<tr>
<td>•高级舰</td>
<td></td>
<td></td>
</tr>

<tr>
<td>重置</td>
<td></td>
<td></td>
</tr>

<tr>
<td>图 13.13</td>
<td>创建映像窗口</td>
<td></td>
</tr>
</tbody>
</table>

<p>在创建硬盘映像窗口中输入名称、描述，选择数据仓库并在路径中输入映像位置，在高级 中的驱动程序中输入qcow2,最后单击“创建”按钮即可添加新映像。同使用CLI方式相同， 新添加的映像在列表中的状态为锁定，当导入成功后状态将变为就绪。</p>

<p>13.3.4添加虚拟网络和模板</p>

<p>当映像导入成功之后，还需要创建虚拟网络才能添加模板，最后在模板的基础上创建 虚拟机。</p>

<p>1.添加虚拟网络</p>

<p>在Sunstone左侧的基础设施中选择虚拟网络，此时右侧将显示虚拟网络列表，单击列表 上方的加号，将显示创建虚拟网络页面，如图13.14所示。</p>

<p>创建虚拟网络</p>

<table>
<thead>
<tr>
<th>09</th>
<th>遒5</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td></td>
<td>0</td>
<td>芸</td>
<td></td>
<td>鼬</td>
</tr>

<tr>
<td>茉飙名称：0vncio描述：0</td>
<td>BcS</td>
<td>舰</td>
<td>Setortiy</td>
<td></td>
</tr>
</tbody>
</table>

<p>图13.14创建虚拟网络</p>

<p>在“常规”选项中输入虚拟网络的名称，然后在“配置”选项中输入网桥和网络模式，在 本例中输入网桥为brO，即桥接网络，网络模式保持默认。OpenNebula也支持802.1q协议的 多Vian中继，因此此处需要按实际情况选择。接下来需要在“地址”选项中输入IP起始地址 和大小（即地址数量），最后单击“创建”按钮，即可创建虚拟网络。</p>

<p>2.创建模板</p>

<p>在Sunstone界面的左侧选择虚拟资源中的模板管理，此时右侧将显示当前己存在的模板 列表，单击列表上方的加号将显示创建模板页面，如图13.15所示。</p>

<table>
<thead>
<tr>
<th>Create Template</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td></td>
<td>向导    織蠡    —Hpxiit    籩 Ki</td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>E    S    ©    0常«    A•抽    转</td>
<td></td>
<td>鶄C^ww&gt;-</td>
<td></td>
<td></td>
</tr>

<tr>
<td>名称©</td>
<td></td>
<td>Hypcrvtw</td>
<td></td>
<td></td>
</tr>

<tr>
<td></td>
<td></td>
<td>&gt; KVM</td>
<td>Vfciwarc</td>
<td>® Xcn @ vC enter</td>
</tr>

<tr>
<td>描述®</td>
<td></td>
<td>Lago ©</td>
<td></td>
<td>••</td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
<td>cost it</td>
<td></td>
</tr>

<tr>
<td></td>
<td>Si2</td>
<td>MB •</td>
<td></td>
<td></td>
</tr>

<tr>
<td>CPU ©</td>
<td></td>
<td></td>
<td>Cost ©</td>
<td></td>
</tr>

<tr>
<td>vcpu &amp;</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>&lsquo;ii Do net allow to change MpacHy ©</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>诏 Oo n« jtiew co modify occwork configuros/on</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p>图13.15创建模板页面</p>

<p>在“常规”选项的名称中输入模板名称，Hypervisor中选择节点类型，此处选择KVM, 在Logo中可以为模板选择一个图标，并选择合适的内存和CPU数量；在“存储”选项中为 模板选择磁盘映像；在“网络”选项中为模板选择虚拟网络；在“输入输出”中选择控制台设 备；最后在“调度”中选择运行模板的主机或集群，单击“创建”按钮即可。在本例中图形界 面选择VNC，监听IP中输入0.0.0.0，并设置访问密码。</p>

<p>13.3.5创建并访问虚拟机</p>

<p>创建虚拟机模板之后就可以将模板实例化为虚拟机，并运行虚拟机。创建虚拟机可以在 Sunstone界面左侧的虚拟资源中选择虚机管理，此时右侧将显示虚拟机列表。在列表上方单击 加号，将弹出创建虚拟机页面，如图13.16所示。</p>

<table>
<thead>
<tr>
<th>创建虚拟机</th>
<th>«■</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>m—.制笛一个名称，以电军w羚重</td>
<td>祕*待e</td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>W名构崧</td>
<td>5C阀的勤黴：*</td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>步#二.楔物</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td>10 T締者1    oneadmin0    oncaUnMi*</td>
<td>群组QfieodRMn</td>
<td>名称CentOSS,    Dirsklopfenios65-friiniOts*i oo</td>
<td>&lsquo;r檢注册时间1Ri5：?907/07/J015i&amp;:26;2tO&amp; 切氓 ISi*r&rdquo;J4(SA 1    Nr</td>
<td></td>
</tr>

<tr>
<td>纘从务廉中ttfl-个镌析</td>
<td></td>
<td></td>
<td>I</td>
<td>B</td>
</tr>
</tbody>
</table>

<p>图13.16创建虚拟机页面</p>

<p>在步骤一中的VM名称中输入虚拟机名，然后在步骤二中选择一个模板，然后单击“创 建”按钮，就完成虚拟机创建了。创建完虚拟机之后，可以在虚拟机管理中查看到刚创建的虚 拟机。刚创建的虚拟机还不能立即访问，还需要等待系统分配资源，当资源分配完成后可以在 状态中看到虚拟机处于运行状态，此时就可以访问了。如果状态为错误或其他非正常的状态， 可以在列表中单击虚拟机，在虚拟机详细信息中选择日志，查看错误原因并排除错误。</p>

<p>当虚拟机处于运行状态时，可通过VNC客户端进行访问，访问端口可通过虚拟机详细信 息中的模板中查看（GRAPHICS信息）。另一个访问虚拟机的方法是在虚拟机列表中，运行的 虚拟机后有一个显示器图标，单击此图标将在网页中显示控制台，如图13.17所示。</p>

<p>图13.17网页访问虚拟机控制台</p>

<p>OpenNebula中虚拟机还有许多操作，读者可通过阅读其官方网站的相关说明了解详情并 进一步使用。</p>

<p>13*4小结</p>

<p>OpenNebula是一个功能十分强大而又简单的开源云计算平台，虽然目前国内使用的人较 少，但可以预见在不久的将来，将会有大量的用户使用。本章介绍了 OpenNebula的基本情况， 还介绍了 OpenNebula在CentOS 7中的安装和配置等内容。</p>

    </div>

    
    

    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/02-%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/01-%E5%90%8E%E7%AB%AF%E7%8E%AF%E5%A2%83/01-linux-%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/11-glusterfs%E5%AD%98%E5%82%A8/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">11 GlusterFS存储</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/01-%E7%9F%A5%E8%AF%86%E6%A0%91/03-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/05-%E5%9F%BA%E7%A1%80%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/02-%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/01-%E5%90%8E%E7%AB%AF%E7%8E%AF%E5%A2%83/01-linux-%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83/centos7-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/14-%E5%85%B6%E4%BB%96-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/">
            <span class="next-text nav-default">14 其他-文件管理</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="iteratelyd@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="http://github.com/iterateself" class="iconfont icon-github" title="github"></a>
      <a href="https://www.zhihu.com/people/thebegin/activities" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.douban.com/people/68028070/" class="iconfont icon-douban" title="douban"></a>
  <a href="http://iterate.site/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
    <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">iterateself</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/dist/even.min.js?v=3.2.0"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>








</body>
</html>
