---
title: 数组与指针相关题目
toc: true
date: 2018-08-28
---




#### Q 5 :

题目：

下面程序的输出是什么？

```
int main(void)
{
    int a[5] = {1, 2, 3, 4, 5};
    int *ptr = (int *)(&a + 1);
    printf("%d,%d", *(a + 1), *(ptr - 1));
    return 0;
}
```

答案:

2
5

解答:

1. a表示数组首元素的地址，对a的所有操作均是以一个元素为单位的。
2. &a表示整个数组的地址，对&a的所有操作均是以一个数组为单位的。<span style="color:red;">这个不知道</span>
3. ptr类型为int *，所有对ptr的所有操作均是以int大小为单位进行的。
4. (int *)(&a + 1)表示指向a数组最后一个元素后一个字节的int类型指针，*(ptr - 1)表示向前移动一个int类型的数据的位置。<span style="color:red;">这个向前移动一个 int 类型的数据，是指的什么？在这里，跟一个元素的位置一样吗？</span>
5. 所有指针类型操作先看右侧是以什么为单位，之后再转换为左侧定义的单位。





#### Q 7 :

题目：
下列代码的输出为：
```
int* pint = 0;
pint += 6;
cout << pint << endl;
```

答案:
24

解答:
考察指针运算。
1. 变量pint为指向int类型的指针，这里 `+1` 表示地址加4（pint值加4）。<span style="color:red;">这个之前不是很清楚</span>
2. 变量pint初值为0，pint + 6后pint的值变为24。




#### Q 18 :

题目：
以下函数用法正确的个数是：
```
void test1(){
    unsigned char array[MAX_CHAR + 1], i;
    for(i = 0;i <= MAX_CHAR; i++){
        array[i] = i;
    }
}

char *test2(){
    char p[] = "hello world";
    return p;
}
char *p = test2();

void test3(){
    char str[10];
    str++;
    *str = '0';
}
```

答案:
0

解答:
考察数组名和指针区别。
1. i的范围有可能超过unsigned char范围。<span style="color:red;">嗯，这个是的。</span>
2. 这里char p[] = "hello world"是数组，该数组是临时变量，函数结束后不能继续使用。<span style="color:red;">数组是临时变量，函数结束后不能继续使用</span>
3. 如果为char *p = "hello world"，这里p是指针并指向常量区字串，虽然p会被销毁，但字符串仍然在，就不会出问题。<span style="color:red;">嗯，这个之前不知道。p 会被销毁，那么这个字符串还可以返回回来吗？</span>
4. 这里 str 是数组名，数组名是常量，不可以自增，正确的操作是char *p = str; p++; *p = '0'。<span style="color:red;">数组名是常量，不可以自增，这个与上面的 Q5 的问题可以放在一起看，&a表示整个数组的地址，对&a的所有操作均是以一个数组为单位的。嗯，现在才对这个稍微有些了解，以前的都忘记了。</span>
